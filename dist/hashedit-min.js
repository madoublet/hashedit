!function(){function e(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function t(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function i(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader;return t.readAsArrayBuffer(e),i(t)}function s(e){var t=new FileReader;return t.readAsText(e),i(t)}function o(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(p.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(p.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},p.blob?(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=r(this);return e?e:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function u(e,t){t=t||{};var r=t.body;if(u.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new n(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function h(e){var t=new n,r=e.getAllResponseHeaders().trim().split("\n");return r.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)}),t}function c(e,t){t||(t={}),this._initBody(e),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof n?t.headers:new n(t.headers),this.url=t.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=e(n),r=t(r);var i=this.map[n];i||(i=[],this.map[n]=i),i.push(r)},n.prototype["delete"]=function(t){delete this.map[e(t)]},n.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},n.prototype.getAll=function(t){return this.map[e(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(n,r){this.map[e(n)]=[t(r)]},n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)};var p={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self},m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.prototype.clone=function(){return new u(this)},o.call(u.prototype),o.call(c.prototype),c.prototype.clone=function(){return new c(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},c.error=function(){var e=new c(null,{status:0,statusText:""});return e.type="error",e};var f=[301,302,303,307,308];c.redirect=function(e,t){if(-1===f.indexOf(t))throw new RangeError("Invalid status code");return new c(null,{status:t,headers:{location:e}})},self.Headers=n,self.Request=u,self.Response=c,self.fetch=function(e,t){return new Promise(function(n,r){function i(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var a;a=u.prototype.isPrototypeOf(e)&&!t?e:new u(e,t);var s=new XMLHttpRequest;s.onload=function(){var e=1223===s.status?204:s.status;if(100>e||e>599)return void r(new TypeError("Network request failed"));var t={status:e,statusText:s.statusText,headers:h(s),url:i()},a="response"in s?s.response:s.responseText;n(new c(a,t))},s.onerror=function(){r(new TypeError("Network request failed"))},s.open(a.method,a.url,!0),"include"===a.credentials&&(s.withCredentials=!0),"responseType"in s&&p.blob&&(s.responseType="blob"),a.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof a._bodyInit?null:a._bodyInit)})},self.fetch.polyfill=!0}}(),function(){function e(e,t){if(!t||"function"==typeof t)return e;for(var n in t)e[n]=t[n];return e}function t(e,t,n){var r,i=0,a=e.length,s=void 0===a||"function"==typeof e;if(n)if(s){for(r in e)if(t.apply(e[r],n)===!1)break}else for(;a>i&&t.apply(e[i++],n)!==!1;);else if(s){for(r in e)if(t.call(e[r],r,e[r])===!1)break}else for(;a>i&&t.call(e[i],i,e[i++])!==!1;);return e}function n(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return _[e]}):e}function r(e){var t=function(e){if(window.XMLHttpRequest)return e(null,new XMLHttpRequest);if(window.ActiveXObject)try{return e(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(t){return e(null,new ActiveXObject("Microsoft.XMLHTTP"))}return e(Error())},n=function(e){if("string"==typeof e)return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},r=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;e.length>n;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|63&r)):(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|63&r>>6),t+=String.fromCharCode(128|63&r))}return t},i=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=r(e);var n,i,a,s,o,l,u,d="",h=0;do n=e.charCodeAt(h++),i=e.charCodeAt(h++),a=e.charCodeAt(h++),s=n>>2,o=(3&n)<<4|i>>4,l=(15&i)<<2|a>>6,u=63&a,isNaN(i)?l=u=64:isNaN(a)&&(u=64),d+=t.charAt(s)+t.charAt(o)+t.charAt(l)+t.charAt(u),n=i=a="",s=o=l=u="";while(e.length>h);return d},a=function(){for(var e=arguments[0],t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e},s=function(e,r,i,o){"function"==typeof i&&(o=i,i={}),i.cache=i.cache||!1,i.data=i.data||{},i.headers=i.headers||{},i.jsonp=i.jsonp||!1,i.async=void 0===i.async?!0:i.async;var l,u=a({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},s.headers,i.headers);if(l="application/json"===u["content-type"]?JSON.stringify(i.data):n(i.data),"GET"===e){var d=[];if(l&&(d.push(l),l=null),i.cache||d.push("_="+(new Date).getTime()),i.jsonp&&(d.push("callback="+i.jsonp),d.push("jsonp="+i.jsonp)),d=d.join("&"),d.length>1&&(r+=r.indexOf("?")>-1?"&"+d:"?"+d),i.jsonp){var h=document.getElementsByTagName("head")[0],c=document.createElement("script");return c.type="text/javascript",c.src=r,void h.appendChild(c)}}t(function(t,n){if(t)return o(t);n.open(e,r,i.async);for(var a in u)u.hasOwnProperty(a)&&n.setRequestHeader(a,u[a]);n.onreadystatechange=function(){if(4===n.readyState){var e=n.responseText||"";if(!o)return;o(n.status,{text:function(){return e},json:function(){return JSON.parse(e)}})}},n.send(l)})},o={authBasic:function(e,t){s.headers.Authorization="Basic "+i(e+":"+t)},connect:function(e,t,n){return s("CONNECT",e,t,n)},del:function(e,t,n){return s("DELETE",e,t,n)},get:function(e,t,n){return s("GET",e,t,n)},head:function(e,t,n){return s("HEAD",e,t,n)},headers:function(e){s.headers=e||{}},isAllowed:function(e,t,n){this.options(e,function(e,r){n(-1!==r.text().indexOf(t))})},options:function(e,t,n){return s("OPTIONS",e,t,n)},patch:function(e,t,n){return s("PATCH",e,t,n)},post:function(e,t,n){return s("POST",e,t,n)},put:function(e,t,n){return s("PUT",e,t,n)},trace:function(e,t,n){return s("TRACE",e,t,n)}},l=e.type?e.type.toLowerCase():"get";o[l](e.url,e,function(t,n){200===t?e.success(n.json(),t,null):e.error(n.text(),t,null)})}function i(e,t){"function"==typeof e&&(t=e,e={}),e=e||{},H.extend(F,e),"string"==typeof F.ns&&(F.ns={namespaces:[F.ns],defaultNs:F.ns}),"string"==typeof F.fallbackNS&&(F.fallbackNS=[F.fallbackNS]),F.interpolationPrefixEscaped=H.regexEscape(F.interpolationPrefix),F.interpolationSuffixEscaped=H.regexEscape(F.interpolationSuffix),F.lng||(F.lng=H.detectLanguage()),F.lng?F.useCookie&&H.cookie.create(F.cookieName,F.lng,F.cookieExpirationTime):(F.lng=F.fallbackLng,F.useCookie&&H.cookie.remove(F.cookieName)),L=H.toLanguages(F.lng),A=L[0],H.log("currentLng set to: "+A),B.setCurrentLng(A),S&&F.setJqueryExt&&c();var n;if(S&&S.Deferred&&(n=S.Deferred()),!F.resStore){var r=H.toLanguages(F.lng);"string"==typeof F.preload&&(F.preload=[F.preload]);for(var i=0,a=F.preload.length;a>i;i++)for(var s=H.toLanguages(F.preload[i]),o=0,l=s.length;l>o;o++)0>r.indexOf(s[o])&&r.push(s[o]);return N.sync.load(r,F,function(e,r){T=r,t&&t(b),n&&n.resolve()}),n?n.promise():void 0}return T=F.resStore,t&&t(b),n&&n.resolve(),n?n.promise():void 0}function a(e,t){"string"==typeof e&&(e=[e]);for(var n=0,r=e.length;r>n;n++)0>F.preload.indexOf(e[n])&&F.preload.push(e[n]);return i(t)}function s(e,t,n){"string"!=typeof t?(n=t,t=F.ns.defaultNs):0>F.ns.namespaces.indexOf(t)&&F.ns.namespaces.push(t),T[e]=T[e]||{},T[e][t]=T[e][t]||{},H.extend(T[e][t],n)}function o(e){F.ns.defaultNs=e}function l(e,t){u([e],t)}function u(e,t){var n={dynamicLoad:F.dynamicLoad,resGetPath:F.resGetPath,getAsync:F.getAsync,customLoad:F.customLoad,ns:{namespaces:e,defaultNs:""}},r=H.toLanguages(F.lng);"string"==typeof F.preload&&(F.preload=[F.preload]);for(var i=0,a=F.preload.length;a>i;i++)for(var s=H.toLanguages(F.preload[i]),o=0,l=s.length;l>o;o++)0>r.indexOf(s[o])&&r.push(s[o]);for(var u=[],d=0,h=r.length;h>d;d++){var c=!1,p=T[r[d]];if(p)for(var m=0,f=e.length;f>m;m++)p[e[m]]||(c=!0);else c=!0;c&&u.push(r[d])}u.length?N.sync._fetch(u,n,function(n,r){var i=e.length*u.length;H.each(e,function(e,n){0>F.ns.namespaces.indexOf(n)&&F.ns.namespaces.push(n),H.each(u,function(e,a){T[a]=T[a]||{},T[a][n]=r[a][n],i--,0===i&&t&&(F.useLocalStorage&&N.sync._storeLocal(T),t())})})}):t&&t()}function d(e,t){return i({lng:e},t)}function h(){return A}function c(){function e(e,t,n){if(0!==t.length){var r="text";if(0===t.indexOf("[")){var i=t.split("]");t=i[1],r=i[0].substr(1,i[0].length-1)}t.indexOf(";")===t.length-1&&(t=t.substr(0,t.length-2));var a;"html"===r?(a=F.defaultValueFromContent?S.extend({defaultValue:e.html()},n):n,e.html(S.t(t,a))):"text"===r?(a=F.defaultValueFromContent?S.extend({defaultValue:e.text()},n):n,e.text(S.t(t,a))):(a=F.defaultValueFromContent?S.extend({defaultValue:e.attr(r)},n):n,e.attr(r,S.t(t,a)))}}function t(t,n){var r=t.attr(F.selectorAttr);if(r){var i=t,a=t.data("i18n-target");if(a&&(i=t.find(a)||t),n||F.useDataAttrOptions!==!0||(n=t.data("i18n-options")),n=n||{},r.indexOf(";")>=0){var s=r.split(";");S.each(s,function(t,r){""!==r&&e(i,r,n)})}else e(i,r,n);F.useDataAttrOptions===!0&&t.data("i18n-options",n)}}S.t=S.t||b,S.fn.i18n=function(e){return this.each(function(){t(S(this),e);var n=S(this).find("["+F.selectorAttr+"]");n.each(function(){t(S(this),e)})})}}function p(e,t,n,r){if(!e)return e;if(r=r||t,0>e.indexOf(r.interpolationPrefix||F.interpolationPrefix))return e;var i=r.interpolationPrefix?H.regexEscape(r.interpolationPrefix):F.interpolationPrefixEscaped,a=r.interpolationSuffix?H.regexEscape(r.interpolationSuffix):F.interpolationSuffixEscaped,s="HTML"+a;return H.each(t,function(t,o){var l=n?n+F.keyseparator+t:t;"object"==typeof o&&null!==o?e=p(e,o,l,r):r.escapeInterpolation||F.escapeInterpolation?(e=e.replace(RegExp([i,l,s].join(""),"g"),o),e=e.replace(RegExp([i,l,a].join(""),"g"),H.escape(o))):e=e.replace(RegExp([i,l,a].join(""),"g"),o)}),e}function m(e,t){var n=",",r="{",i="}",a=H.extend({},t);for(delete a.postProcess;-1!=e.indexOf(F.reusePrefix)&&(C++,!(C>F.maxRecursion));){var s=e.lastIndexOf(F.reusePrefix),o=e.indexOf(F.reuseSuffix,s)+F.reuseSuffix.length,l=e.substring(s,o),u=l.replace(F.reusePrefix,"").replace(F.reuseSuffix,"");if(-1!=u.indexOf(n)){var d=u.indexOf(n);if(-1!=u.indexOf(r,d)&&-1!=u.indexOf(i,d)){var h=u.indexOf(r,d),c=u.indexOf(i,h)+i.length;try{a=H.extend(a,JSON.parse(u.substring(h,c))),u=u.substring(0,d)}catch(p){}}}var m=w(u,a);e=e.replace(l,m)}return e}function f(e){return e.context&&"string"==typeof e.context}function g(e){return void 0!==e.count&&"string"!=typeof e.count&&1!==e.count}function v(e,t){t=t||{};var n=t.defaultValue||e,r=x(e,t);return void 0!==r||r===n}function b(){return C=0,w.apply(null,arguments)}function y(){for(var e=[],t=1;arguments.length>t;t++)e.push(arguments[t]);return{postProcess:"sprintf",sprintf:e}}function w(e,t){t="string"==typeof t?y.apply(null,arguments):t||{};var n,r=t.defaultValue||e,i=x(e,t),a=t.lng?H.toLanguages(t.lng):L,s=t.ns||F.ns.defaultNs;e.indexOf(F.nsseparator)>-1&&(n=e.split(F.nsseparator),s=n[0],e=n[1]),void 0===i&&F.sendMissing&&(t.lng?z.postMissing(a[0],s,e,r,a):z.postMissing(F.lng,s,e,r,a));var o=t.postProcess||F.postProcess;void 0!==i&&o&&P[o]&&(i=P[o](i,e,t));var l=r;if(r.indexOf(F.nsseparator)>-1&&(n=r.split(F.nsseparator),l=n[1]),l===e&&F.parseMissingKey&&(r=F.parseMissingKey(r)),void 0===i&&(r=p(r,t),r=m(r,t),o&&P[o])){var u=t.defaultValue||e;i=P[o](u,e,t)}return void 0!==i?i:r}function x(e,t){t=t||{};var n,r,i=t.defaultValue||e,a=L;if(!T)return i;if(t.lng&&(a=H.toLanguages(t.lng),!T[a[0]])){var s=F.getAsync;F.getAsync=!1,N.sync.load(a,F,function(e,t){H.extend(T,t),F.getAsync=s})}var o=t.ns||F.ns.defaultNs;if(e.indexOf(F.nsseparator)>-1){var l=e.split(F.nsseparator);o=l[0],e=l[1]}if(f(t)){n=H.extend({},t),delete n.context,n.defaultValue=F.contextNotFound;var u=o+F.nsseparator+e+"_"+t.context;if(r=b(u,n),r!=F.contextNotFound)return p(r,{context:t.context})}if(g(t)){n=H.extend({},t),delete n.count,n.defaultValue=F.pluralNotFound;var d=o+F.nsseparator+e+F.pluralSuffix,h=B.get(a[0],t.count);if(h>=0?d=d+"_"+h:1===h&&(d=o+F.nsseparator+e),r=b(d,n),r!=F.pluralNotFound)return p(r,{count:t.count,interpolationPrefix:t.interpolationPrefix,interpolationSuffix:t.interpolationSuffix})}for(var c,v=e.split(F.keyseparator),y=0,E=a.length;E>y&&void 0===c;y++){for(var A=a[y],k=0,S=T[A]&&T[A][o];v[k];)S=S&&S[v[k]],k++;if(void 0!==S){if("string"==typeof S)S=p(S,t),S=m(S,t);else if("[object Array]"!==Object.prototype.toString.apply(S)||F.returnObjectTrees||t.returnObjectTrees){if(null===S&&F.fallbackOnNull===!0)S=void 0;else if(null!==S)if(F.returnObjectTrees||t.returnObjectTrees){var C={};for(var _ in S)C[_]=w(o+F.nsseparator+e+F.keyseparator+_,t);S=C}else S="key '"+o+":"+e+" ("+A+")' returned a object instead of string.",H.log(S)}else S=S.join("\n"),S=p(S,t),S=m(S,t);c=S}}if(void 0===c&&!t.isFallbackLookup&&(F.fallbackToDefaultNS===!0||F.fallbackNS&&F.fallbackNS.length>0))if(t.isFallbackLookup=!0,F.fallbackNS.length){for(var M=0,D=F.fallbackNS.length;D>M;M++)if(c=x(F.fallbackNS[M]+F.nsseparator+e,t)){var z=c.indexOf(F.nsseparator)>-1?c.split(F.nsseparator)[1]:c,P=i.indexOf(F.nsseparator)>-1?i.split(F.nsseparator)[1]:i;if(z!==P)break}}else c=x(e,t);return c}function E(){var e,t=[];if("undefined"!=typeof window&&(function(){for(var e=window.location.search.substring(1),n=e.split("&"),r=0;n.length>r;r++){var i=n[r].indexOf("=");if(i>0){var a=n[r].substring(0,i),s=n[r].substring(i+1);t[a]=s}}}(),t[F.detectLngQS]&&(e=t[F.detectLngQS])),!e&&"undefined"!=typeof document&&F.useCookie){var n=H.cookie.read(F.cookieName);n&&(e=n)}return e||"undefined"==typeof navigator||(e=navigator.language?navigator.language:navigator.userLanguage),e}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&1/0!=r&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var i=r>=0?Math.min(r,n-1):n-Math.abs(r);i>=0;i--)if(i in t&&t[i]===e)return i;return-1});var A,k=this,S=k.jQuery||k.Zepto,N={},T={},C=0,L=[];"undefined"!=typeof module&&module.exports?module.exports=N:(S&&(S.i18n=S.i18n||N),k.i18n=k.i18n||N);var F={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",postProcess:void 0,parseMissingKey:void 0},_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},M={create:function(e,t,n){var r;if(n){var i=new Date;i.setTime(i.getTime()+6e4*n),r="; expires="+i.toGMTString()}else r="";document.cookie=e+"="+t+r+"; path=/"},read:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;n.length>r;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},D={create:function(){},read:function(){return null},remove:function(){}},H={extend:S?S.extend:e,each:S?S.each:t,ajax:S?S.ajax:r,cookie:"undefined"!=typeof document?M:D,detectLanguage:E,escape:n,log:function(e){F.debug&&"undefined"!=typeof console&&console.log(e)},toLanguages:function(e){var t=[];if("string"==typeof e&&e.indexOf("-")>-1){var n=e.split("-");e=F.lowerCaseLng?n[0].toLowerCase()+"-"+n[1].toLowerCase():n[0].toLowerCase()+"-"+n[1].toUpperCase(),"unspecific"!==F.load&&t.push(e),"current"!==F.load&&t.push(n[0])}else t.push(e);return-1===t.indexOf(F.fallbackLng)&&F.fallbackLng&&t.push(F.fallbackLng),t},regexEscape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};H.applyReplacement=p;var z={load:function(e,t,n){t.useLocalStorage?z._loadLocal(e,t,function(r,i){for(var a=[],s=0,o=e.length;o>s;s++)i[e[s]]||a.push(e[s]);a.length>0?z._fetch(a,t,function(e,t){H.extend(i,t),z._storeLocal(t),n(null,i)}):n(null,i)}):z._fetch(e,t,function(e,t){n(null,t)})},_loadLocal:function(e,t,n){var r={},i=(new Date).getTime();if(window.localStorage){var a=e.length;H.each(e,function(e,s){var o=window.localStorage.getItem("res_"+s);o&&(o=JSON.parse(o),o.i18nStamp&&o.i18nStamp+t.localStorageExpirationTime>i&&(r[s]=o)),a--,0===a&&n(null,r)})}},_storeLocal:function(e){if(window.localStorage)for(var t in e)e[t].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+t,JSON.stringify(e[t]))},_fetch:function(e,t,n){var r=t.ns,i={};if(t.dynamicLoad){var a=function(e,t){n(null,t)};if("function"==typeof t.customLoad)t.customLoad(e,r.namespaces,t,a);else{var s=p(t.resGetPath,{lng:e.join("+"),ns:r.namespaces.join("+")});H.ajax({url:s,success:function(e){H.log("loaded: "+s),a(null,e)},error:function(e,t,n){H.log("failed loading: "+s),a("failed loading resource.json error: "+n)},dataType:"json",async:t.getAsync})}}else{var o,l=r.namespaces.length*e.length;H.each(r.namespaces,function(r,a){H.each(e,function(e,r){var s=function(e,t){e&&(o=o||[],o.push(e)),i[r]=i[r]||{},i[r][a]=t,l--,0===l&&n(o,i)};"function"==typeof t.customLoad?t.customLoad(r,a,t,s):z._fetchOne(r,a,t,s)})})}},_fetchOne:function(e,t,n,r){var i=p(n.resGetPath,{lng:e,ns:t});H.ajax({url:i,success:function(e){H.log("loaded: "+i),r(null,e)},error:function(e,t,n){H.log("failed loading: "+i),r(n,{})},dataType:"json",async:n.getAsync})},postMissing:function(e,t,n,r,i){var a={};a[n]=r;var s=[];if("fallback"===F.sendMissingTo&&F.fallbackLng!==!1)s.push({lng:F.fallbackLng,url:p(F.resPostPath,{lng:F.fallbackLng,ns:t})});else if("current"===F.sendMissingTo||"fallback"===F.sendMissingTo&&F.fallbackLng===!1)s.push({lng:e,url:p(F.resPostPath,{lng:e,ns:t})});else if("all"===F.sendMissingTo)for(var o=0,l=i.length;l>o;o++)s.push({lng:i[o],url:p(F.resPostPath,{lng:i[o],ns:t})});for(var u=0,d=s.length;d>u;u++){var h=s[u];H.ajax({url:h.url,type:F.sendType,data:a,success:function(){H.log("posted missing key '"+n+"' to: "+h.url);for(var e=n.split("."),i=0,a=T[h.lng][t];e[i];)a=a[e[i]]=i===e.length-1?r:a[e[i]]||{},i++},error:function(){H.log("failed posting missing key '"+n+"' to: "+h.url)},dataType:"json",async:F.postAsync})}}},B={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(e){return Number(e>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ak:{name:"Akan",numbers:[1,2],plurals:function(e){return Number(e>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(e){return Number(e>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ay:{name:"AymarÃ¡",numbers:[1],plurals:function(){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(e){return Number(1!=e)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bo:{name:"Tibetan",numbers:[1],plurals:function(){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(e){return Number(e>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},cgg:{name:"Chiga",numbers:[1],plurals:function(){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},de:{name:"German",numbers:[1,2],plurals:function(e){return Number(1!=e)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(e){return Number(1!=e)}},en:{name:"English",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es:{name:"Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},et:{name:"Estonian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eu:{name:"Basque",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fa:{name:"Persian",numbers:[1],plurals:function(){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(e){return Number(e>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fr:{name:"French",numbers:[1,2],plurals:function(e){return Number(e>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gun:{name:"Gun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(e){return Number(1!=e)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(e){return Number(1!=e)}},id:{name:"Indonesian",numbers:[1],plurals:function(){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(e){return Number(1!=e%10||11==e%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ja:{name:"Japanese",numbers:[1],plurals:function(){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(e){return Number(0!==e)}},ka:{name:"Georgian",numbers:[1],plurals:function(){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ko:{name:"Korean",numbers:[1],plurals:function(){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(e){return Number(1==e?0:2==e?1:3==e?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(e){return Number(e>1)}},lo:{name:"Lao",numbers:[1],plurals:function(){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(e){return Number(1==e%10&&11!=e%100?0:0!==e?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(e){return Number(e>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(e){return Number(e>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(e){return Number(e>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(e){return Number(1==e||1==e%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(e){return Number(1==e?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ms:{name:"Malay",numbers:[1],plurals:function(){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(e){return Number(1!=e)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(e){return Number(1!=e)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(e){return Number(e>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(e){return Number(1!=e)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(e){return Number(1!=e)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(e){return Number(1!=e)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(e){return Number(1==e%100?1:2==e%100?2:3==e%100||4==e%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},son:{name:"Songhay",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(e){return Number(1!=e)}},te:{name:"Telugu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(e){return Number(e>1)}},th:{name:"Thai",numbers:[1],plurals:function(){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(e){return Number(e>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(e){return Number(e>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(e){return Number(e>1);
}},vi:{name:"Vietnamese",numbers:[1],plurals:function(){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(e){return Number(e>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(e){return Number(1!=e)}},zh:{name:"Chinese",numbers:[1],plurals:function(){return 0}}},addRule:function(e,t){B.rules[e]=t},setCurrentLng:function(e){if(!B.currentRule||B.currentRule.lng!==e){var t=e.split("-");B.currentRule={lng:e,rule:B.rules[t[0]]}}},get:function(e,t){function n(t,n){var r;if(r=B.currentRule&&B.currentRule.lng===e?B.currentRule.rule:B.rules[t]){var i=r.plurals(n),a=r.numbers[i];return 2===r.numbers.length&&1===r.numbers[0]&&(2===a?a=-1:1===a&&(a=1)),a}return 1===n?"1":"-1"}var r=e.split("-");return n(r[0],t)}},P={},O=function(e,t){P[e]=t},I=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var i,a,s,o,l,u,d,h=1,c=n.length,p="",m=[];for(a=0;c>a;a++)if(p=e(n[a]),"string"===p)m.push(n[a]);else if("array"===p){if(o=n[a],o[2])for(i=r[h],s=0;o[2].length>s;s++){if(!i.hasOwnProperty(o[2][s]))throw I('[sprintf] property "%s" does not exist',o[2][s]);i=i[o[2][s]]}else i=o[1]?r[o[1]]:r[h++];if(/[^s]/.test(o[8])&&"number"!=e(i))throw I("[sprintf] expecting number but found %s",e(i));switch(o[8]){case"b":i=i.toString(2);break;case"c":i=String.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=o[7]?i.toExponential(o[7]):i.toExponential();break;case"f":i=o[7]?parseFloat(i).toFixed(o[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i+="")&&o[7]?i.substring(0,o[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(o[8])&&o[3]&&i>=0?"+"+i:i,u=o[4]?"0"==o[4]?"0":o[4].charAt(1):" ",d=o[6]-(i+"").length,l=o[6]?t(u,d):"",m.push(o[5]?i+l:l+i)}return m.join("")},n.cache={},n.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){i|=1;var a=[],s=n[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(s)))throw"[sprintf] huh?";for(a.push(o[1]);""!==(s=s.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(s)))a.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(s)))throw"[sprintf] huh?";a.push(o[1])}n[2]=a}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r},n}(),q=function(e,t){return t.unshift(e),I.apply(null,t)};O("sprintf",function(e,t,n){return n.sprintf?"[object Array]"===Object.prototype.toString.apply(n.sprintf)?q(e,n.sprintf):"object"==typeof n.sprintf?I(e,n.sprintf):e:e}),N.init=i,N.setLng=d,N.preload=a,N.addResourceBundle=s,N.loadNamespace=l,N.loadNamespaces=u,N.setDefaultNamespace=o,N.t=b,N.translate=b,N.exists=v,N.detectLanguage=H.detectLanguage,N.pluralExtensions=B,N.sync=z,N.functions=H,N.lng=h,N.addPostProcessor=O,N.options=F}(),function(){var e,t,n,r,i,a,s,o,l=[].slice,u={}.hasOwnProperty,d=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};s=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,n,r,i,a;if(r=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[r])for(i=0,a=n.length;a>i;i++)t=n[i],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var n,r,i,a,s;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(r=this._callbacks[e],!r)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(i=a=0,s=r.length;s>a;i=++a)if(n=r[i],n===t){r.splice(i,1);break}return this},e}(),e=function(e){function n(e,t){var i,a,s;if(this.element=e,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(n.instances.push(this),this.element.dropzone=this,i=null!=(s=n.optionsForElement(this.element))?s:{},this.options=r({},this.defaultOptions,i,null!=t?t:{}),this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(a=this.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?n.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:n.getElements(this.options.clickable,"clickable")),this.init()}var r,i;return d(n,e),n.prototype.Emitter=t,n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return s},forceFallback:!1,fallback:function(){var e,t,r,i,a,s;for(this.element.className=""+this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),i=0,a=s.length;a>i;i++)e=s[i],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),r=t.getElementsByTagName("span")[0],r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,r;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=n*t.optHeight:null==t.optHeight&&(t.optHeight=1/n*t.optWidth),r=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>r?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/r),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:s,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:s,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,r,i,a,s,o,l,u,d,h,c,p,m;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=n.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),h=e.previewElement.querySelectorAll("[data-dz-name]"),a=0,l=h.length;l>a;a++)t=h[a],t.textContent=this._renameFilename(e.name);for(c=e.previewElement.querySelectorAll("[data-dz-size]"),s=0,u=c.length;u>s;s++)t=c[s],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),r=function(t){return function(r){return r.preventDefault(),r.stopPropagation(),e.status===n.UPLOADING?n.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?n.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),p=e.previewElement.querySelectorAll("[data-dz-remove]"),m=[],o=0,d=p.length;d>o;o++)i=p[o],m.push(i.addEventListener("click",r));return m}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,r,i,a;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),a=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),r=0,i=a.length;i>r;r++)n=a[r],n.alt=e.name,n.src=t;return setTimeout(function(){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var n,r,i,a,s;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),a=e.previewElement.querySelectorAll("[data-dz-errormessage]"),s=[],r=0,i=a.length;i>r;r++)n=a[r],s.push(n.textContent=t);return s}},errormultiple:s,processing:function(e){return e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink)?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:s,uploadprogress:function(e,t){var n,r,i,a,s;if(e.previewElement){for(a=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],r=0,i=a.length;i>r;r++)n=a[r],s.push("PROGRESS"===n.nodeName?n.value=t:n.style.width=""+t+"%");return s}},totaluploadprogress:s,sending:s,sendingmultiple:s,success:function(e){return e.previewElement?e.previewElement.classList.add("dz-success"):void 0},successmultiple:s,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:s,complete:function(e){return e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement?e.previewElement.classList.add("dz-complete"):void 0},completemultiple:s,maxfilesexceeded:s,maxfilesreached:s,queuecomplete:s,addedfiles:s,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},r=function(){var e,t,n,r,i,a,s;for(r=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],a=0,s=n.length;s>a;a++){t=n[a];for(e in t)i=t[e],r[e]=i}return r},n.prototype.getAcceptedFiles=function(){var e,t,n,r,i;for(r=this.files,i=[],t=0,n=r.length;n>t;t++)e=r[t],e.accepted&&i.push(e);return i},n.prototype.getRejectedFiles=function(){var e,t,n,r,i;for(r=this.files,i=[],t=0,n=r.length;n>t;t++)e=r[t],e.accepted||i.push(e);return i},n.prototype.getFilesWithStatus=function(e){var t,n,r,i,a;for(i=this.files,a=[],n=0,r=i.length;r>n;n++)t=i[n],t.status===e&&a.push(t);return a},n.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(n.QUEUED)},n.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(n.UPLOADING)},n.prototype.getAddedFiles=function(){return this.getFilesWithStatus(n.ADDED)},n.prototype.getActiveFiles=function(){var e,t,r,i,a;for(i=this.files,a=[],t=0,r=i.length;r>t;t++)e=i[t],(e.status===n.UPLOADING||e.status===n.QUEUED)&&a.push(e);return a},n.prototype.init=function(){var e,t,r,i,a,s,o;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(r=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,n,i,a;if(n=e.hiddenFileInput.files,n.length)for(i=0,a=n.length;a>i;i++)t=n[i],e.addFile(t);return e.emit("addedfiles",n),r()})}}(this))(),this.URL=null!=(s=window.URL)?s:window.webkitURL,o=this.events,i=0,a=o.length;a>i;i++)e=o[i],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(){return 0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(n){return t(n),e.emit("dragenter",n)}}(this),dragover:function(e){return function(n){var r;try{r=n.dataTransfer.effectAllowed}catch(i){}return n.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",t(n),e.emit("dragover",n)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(n){return t(n),e.drop(n)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(r){return(t!==e.element||r.target===e.element||n.elementInside(r.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var e,t,n,r,i,a,s,o;if(r=0,n=0,e=this.getActiveFiles(),e.length){for(o=this.getActiveFiles(),a=0,s=o.length;s>a;a++)t=o[a],r+=t.upload.bytesSent,n+=t.upload.total;i=100*r/n}else i=100;return this.emit("totaluploadprogress",i,n,r)},n.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},n.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},n.prototype.getFallbackForm=function(){var e,t,r,i;return(e=this.getExistingFallback())?e:(r='<div class="dz-fallback">',this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=n.createElement(r),"FORM"!==this.element.tagName?(i=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),i.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=i?i:t)},n.prototype.getExistingFallback=function(){var e,t,n,r,i,a;for(t=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},a=["div","form"],r=0,i=a.length;i>r;r++)if(n=a[r],e=t(this.element.getElementsByTagName(n)))return e},n.prototype.setupEventListeners=function(){var e,t,n,r,i,a,s;for(a=this.listeners,s=[],r=0,i=a.length;i>r;r++)e=a[r],s.push(function(){var r,i;r=e.events,i=[];for(t in r)n=r[t],i.push(e.element.addEventListener(t,n,!1));return i}());return s},n.prototype.removeEventListeners=function(){var e,t,n,r,i,a,s;for(a=this.listeners,s=[],r=0,i=a.length;i>r;r++)e=a[r],s.push(function(){var r,i;r=e.events,i=[];for(t in r)n=r[t],i.push(e.element.removeEventListener(t,n,!1));return i}());return s},n.prototype.disable=function(){var e,t,n,r,i;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),r=this.files,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(this.cancelUpload(e));return i},n.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(e){var t,n,r,i,a,s,o,l;if(r=0,i="b",e>0){for(s=["TB","GB","MB","KB","b"],n=o=0,l=s.length;l>o;n=++o)if(a=s[n],t=Math.pow(this.options.filesizeBase,4-n)/10,e>=t){r=e/Math.pow(this.options.filesizeBase,4-n),i=a;break}r=Math.round(10*r)/10}return"<strong>"+r+"</strong> "+i},n.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&(n=e.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)))},n.prototype.paste=function(e){var t,n;return null!=(null!=e&&null!=(n=e.clipboardData)?n.items:void 0)?(this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0):void 0},n.prototype.handleFiles=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(this.addFile(t));return i},n.prototype._addFilesFromItems=function(e){var t,n,r,i,a;for(a=[],r=0,i=e.length;i>r;r++)n=e[r],a.push(null!=n.webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?this.addFile(n.getAsFile()):t.isDirectory?this._addFilesFromDirectory(t,t.name):void 0:null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?this.addFile(n.getAsFile()):void 0);return a},n.prototype._addFilesFromDirectory=function(e,t){var n,r,i;return n=e.createReader(),r=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0},(i=function(e){return function(){return n.readEntries(function(n){var r,a,s;if(n.length>0){for(a=0,s=n.length;s>a;a++)r=n[a],r.isFile?r.file(function(n){return e.options.ignoreHiddenFiles&&"."===n.name.substring(0,1)?void 0:(n.fullPath=""+t+"/"+n.name,e.addFile(n))}):r.isDirectory&&e._addFilesFromDirectory(r,""+t+"/"+r.name);i()}return null},r)}}(this))()},n.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},n.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},n.prototype.enqueueFiles=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)t=e[n],this.enqueueFile(t);return null},n.prototype.enqueueFile=function(e){if(e.status!==n.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=n.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},n.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},n.prototype.removeFile=function(e){return e.status===n.UPLOADING&&this.cancelUpload(e),this.files=o(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},n.prototype.removeAllFiles=function(e){var t,r,i,a;for(null==e&&(e=!1),a=this.files.slice(),r=0,i=a.length;i>r;r++)t=a[r],(t.status!==n.UPLOADING||e)&&this.removeFile(t);return null},n.prototype.createThumbnail=function(e,t){var n;return n=new FileReader,n.onload=function(r){return function(){return"image/svg+xml"===e.type?(r.emit("thumbnail",e,n.result),void(null!=t&&t())):r.createThumbnailFromUrl(e,n.result,t)}}(this),n.readAsDataURL(e)},n.prototype.createThumbnailFromUrl=function(e,t,n,r){var i;return i=document.createElement("img"),r&&(i.crossOrigin=r),i.onload=function(t){return function(){var r,s,o,l,u,d,h,c;return e.width=i.width,e.height=i.height,o=t.options.resize.call(t,e),null==o.trgWidth&&(o.trgWidth=o.optWidth),null==o.trgHeight&&(o.trgHeight=o.optHeight),r=document.createElement("canvas"),s=r.getContext("2d"),r.width=o.trgWidth,r.height=o.trgHeight,a(s,i,null!=(u=o.srcX)?u:0,null!=(d=o.srcY)?d:0,o.srcWidth,o.srcHeight,null!=(h=o.trgX)?h:0,null!=(c=o.trgY)?c:0,o.trgWidth,o.trgHeight),l=r.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=n?n():void 0}}(this),null!=n&&(i.onerror=n),i.src=t},n.prototype.processQueue=function(){var e,t,n,r;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(r=this.getQueuedFiles(),r.length>0)){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-n));for(;t>e;){if(!r.length)return;this.processFile(r.shift()),e++}}},n.prototype.processFile=function(e){return this.processFiles([e])},n.prototype.processFiles=function(e){var t,r,i;for(r=0,i=e.length;i>r;r++)t=e[r],t.processing=!0,t.status=n.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},n.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,r,i,a;for(i=this.files,a=[],n=0,r=i.length;r>n;n++)t=i[n],t.xhr===e&&a.push(t);return a}.call(this)},n.prototype.cancelUpload=function(e){var t,r,i,a,s,o,l;if(e.status===n.UPLOADING){for(r=this._getFilesWithXhr(e.xhr),i=0,s=r.length;s>i;i++)t=r[i],t.status=n.CANCELED;for(e.xhr.abort(),a=0,o=r.length;o>a;a++)t=r[a],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",r)}else((l=e.status)===n.ADDED||l===n.QUEUED)&&(e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},i=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},n.prototype.uploadFile=function(e){return this.uploadFiles([e])},n.prototype.uploadFiles=function(e){var t,a,s,o,l,u,d,h,c,p,m,f,g,v,b,y,w,x,E,A,k,S,N,T,C,L,F,_,M,D,H,z,B,P;for(E=new XMLHttpRequest,A=0,T=e.length;T>A;A++)t=e[A],t.xhr=E;f=i(this.options.method,e),w=i(this.options.url,e),E.open(f,w,!0),E.withCredentials=!!this.options.withCredentials,b=null,s=function(n){return function(){var r,i,a;for(a=[],r=0,i=e.length;i>r;r++)t=e[r],a.push(n._errorProcessing(e,b||n.options.dictResponseError.replace("{{statusCode}}",E.status),E));return a}}(this),y=function(n){return function(r){var i,a,s,o,l,u,d,h,c;if(null!=r)for(a=100*r.loaded/r.total,s=0,u=e.length;u>s;s++)t=e[s],t.upload={progress:a,total:r.total,bytesSent:r.loaded};else{for(i=!0,a=100,o=0,d=e.length;d>o;o++)t=e[o],(100!==t.upload.progress||t.upload.bytesSent!==t.upload.total)&&(i=!1),t.upload.progress=a,t.upload.bytesSent=t.upload.total;if(i)return}for(c=[],l=0,h=e.length;h>l;l++)t=e[l],c.push(n.emit("uploadprogress",t,a,t.upload.bytesSent));return c}}(this),E.onload=function(t){return function(r){var i;if(e[0].status!==n.CANCELED&&4===E.readyState){if(b=E.responseText,E.getResponseHeader("content-type")&&~E.getResponseHeader("content-type").indexOf("application/json"))try{b=JSON.parse(b)}catch(a){r=a,b="Invalid JSON response from server."}return y(),200<=(i=E.status)&&300>i?t._finished(e,b,r):s()}}}(this),E.onerror=function(){return function(){return e[0].status!==n.CANCELED?s():void 0}}(this),v=null!=(M=E.upload)?M:E,v.onprogress=y,u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&r(u,this.options.headers);for(o in u)l=u[o],l&&E.setRequestHeader(o,l);if(a=new FormData,this.options.params){D=this.options.params;for(m in D)x=D[m],a.append(m,x)}for(k=0,C=e.length;C>k;k++)t=e[k],this.emit("sending",t,E,a);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,E,a),"FORM"===this.element.tagName)for(H=this.element.querySelectorAll("input, textarea, select, button"),S=0,L=H.length;L>S;S++)if(h=H[S],c=h.getAttribute("name"),p=h.getAttribute("type"),"SELECT"===h.tagName&&h.hasAttribute("multiple"))for(z=h.options,N=0,F=z.length;F>N;N++)g=z[N],g.selected&&a.append(c,g.value);else(!p||"checkbox"!==(B=p.toLowerCase())&&"radio"!==B||h.checked)&&a.append(c,h.value);for(d=_=0,P=e.length-1;P>=0?P>=_:_>=P;d=P>=0?++_:--_)a.append(this._getParamName(d),e[d],this._renameFilename(e[d].name));return this.submitRequest(E,a,e)},n.prototype.submitRequest=function(e,t){return e.send(t)},n.prototype._finished=function(e,t,r){var i,a,s;for(a=0,s=e.length;s>a;a++)i=e[a],i.status=n.SUCCESS,
this.emit("success",i,t,r),this.emit("complete",i);return this.options.uploadMultiple&&(this.emit("successmultiple",e,t,r),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},n.prototype._errorProcessing=function(e,t,r){var i,a,s;for(a=0,s=e.length;s>a;a++)i=e[a],i.status=n.ERROR,this.emit("error",i,t,r),this.emit("complete",i);return this.options.uploadMultiple&&(this.emit("errormultiple",e,t,r),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},n}(t),e.version="4.3.0",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[n(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,n,r,i,a,s;for(document.querySelectorAll?r=document.querySelectorAll(".dropzone"):(r=[],t=function(e){var t,n,i,a;for(a=[],n=0,i=e.length;i>n;n++)t=e[n],a.push(/(^| )dropzone($| )/.test(t.className)?r.push(t):void 0);return a},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),s=[],i=0,a=r.length;a>i;i++)n=r[i],s.push(e.optionsForElement(n)!==!1?new e(n):void 0);return s},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,r,i,a;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(a=e.blacklistedBrowsers,r=0,i=a.length;i>r;r++)n=a[r],n.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},o=function(e,t){var n,r,i,a;for(a=[],r=0,i=e.length;i>r;r++)n=e[r],n!==t&&a.push(n);return a},n=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(e,t){var n,r,i,a,s,o,l,u;if(e instanceof Array){i=[];try{for(a=0,o=e.length;o>a;a++)r=e[a],i.push(this.getElement(r,t))}catch(d){n=d,i=null}}else if("string"==typeof e)for(i=[],u=document.querySelectorAll(e),s=0,l=u.length;l>s;s++)r=u[s],i.push(r);else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i},e.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},e.isValidFile=function(e,t){var n,r,i,a,s;if(!t)return!0;for(t=t.split(","),r=e.type,n=r.replace(/\/.*$/,""),a=0,s=t.length;s>a;a++)if(i=t[a],i=i.trim(),"."===i.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(i.toLowerCase(),e.name.length-i.length))return!0}else if(/\/\*$/.test(i)){if(n===i.replace(/\/.*$/,""))return!0}else if(r===i)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",i=function(e){var t,n,r,i,a,s,o,l,u,d;for(o=e.naturalWidth,s=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=s,r=n.getContext("2d"),r.drawImage(e,0,0),i=r.getImageData(0,0,1,s).data,d=0,a=s,l=s;l>d;)t=i[4*(l-1)+3],0===t?a=l:d=l,l=a+d>>1;return u=l/s,0===u?1:u},a=function(e,t,n,r,a,s,o,l,u,d){var h;return h=i(t),e.drawImage(t,n,r,a,s,o,l,u,d/h)},r=function(e,t){var n,r,i,a,s,o,l,u,d;if(i=!1,d=!0,r=e.document,u=r.documentElement,n=r.addEventListener?"addEventListener":"attachEvent",l=r.addEventListener?"removeEventListener":"detachEvent",o=r.addEventListener?"":"on",a=function(n){return"readystatechange"!==n.type||"complete"===r.readyState?(("load"===n.type?e:r)[l](o+n.type,a,!1),!i&&(i=!0)?t.call(e,n.type||n):void 0):void 0},s=function(){var e;try{u.doScroll("left")}catch(t){return e=t,void setTimeout(s,50)}return a("poll")},"complete"!==r.readyState){if(r.createEventObject&&u.doScroll){try{d=!e.frameElement}catch(h){}d&&s()}return r[n](o+"DOMContentLoaded",a,!1),r[n](o+"readystatechange",a,!1),e[n](o+"load",a,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},r(window,e._autoDiscoverFunction)}.call(this),!function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=v({},t),e[P]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var r in n)!(r in t)&&(t[r]=n[r]);X(t);for(var a in this)"_"===a.charAt(0)&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:R,i(e,"mousedown",this._onTapStart),i(e,"touchstart",this._onTapStart),this.nativeDraggable&&(i(e,"dragover",this),i(e,"dragenter",this)),G.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){x&&x.state!==e&&(o(x,"display",e?"none":""),!e&&x.state&&E.insertBefore(x,b),x.state=e)}function n(e,t,n){if(e){n=n||I,t=t.split(".");var r=t.shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(">*"===r&&e.parentNode===n||(""===r||e.nodeName.toUpperCase()==r)&&(!t.length||((" "+e.className+" ").match(i)||[]).length==t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function r(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function i(e,t,n){e.addEventListener(t,n,!1)}function a(e,t,n){e.removeEventListener(t,n,!1)}function s(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(B," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(B," ")}}function o(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return I.defaultView&&I.defaultView.getComputedStyle?n=I.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,a=r.length;if(n)for(;a>i;i++)n(r[i],i);return r}return[]}function u(e,t,n,r,i,a,s){var o=I.createEvent("Event"),l=(e||t[P]).options,u="on"+n.charAt(0).toUpperCase()+n.substr(1);o.initEvent(n,!0,!0),o.to=t,o.from=i||t,o.item=r||t,o.clone=x,o.oldIndex=a,o.newIndex=s,t.dispatchEvent(o),l[u]&&l[u].call(e,o)}function d(e,t,n,r,i,a){var s,o,l=e[P],u=l.options.onMove;return s=I.createEvent("Event"),s.initEvent("move",!0,!0),s.to=t,s.from=e,s.dragged=n,s.draggedRect=r,s.related=i||t,s.relatedRect=a||t.getBoundingClientRect(),e.dispatchEvent(s),u&&(o=u.call(l,s)),o}function h(e){e.draggable=!1}function c(){j=!1}function p(e,t){var n=e.lastElementChild,r=n.getBoundingClientRect();return(t.clientY-(r.top+r.height)>5||t.clientX-(r.right+r.width)>5)&&n}function m(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function f(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function g(e,t){var n,r;return function(){void 0===n&&(n=arguments,r=this,setTimeout(function(){1===n.length?e.call(r,n[0]):e.apply(r,n),n=void 0},t))}}function v(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var b,y,w,x,E,A,k,S,N,T,C,L,F,_,M,D,H,z={},B=/\s+/g,P="Sortable"+(new Date).getTime(),O=window,I=O.document,q=O.parseInt,R=!!("draggable"in I.createElement("div")),U=function(e){return e=I.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),j=!1,V=Math.abs,G=([].slice,[]),W=g(function(e,t,n){if(n&&t.scroll){var r,i,a,s,o=t.scrollSensitivity,l=t.scrollSpeed,u=e.clientX,d=e.clientY,h=window.innerWidth,c=window.innerHeight;if(S!==n&&(k=t.scroll,S=n,k===!0)){k=n;do if(k.offsetWidth<k.scrollWidth||k.offsetHeight<k.scrollHeight)break;while(k=k.parentNode)}k&&(r=k,i=k.getBoundingClientRect(),a=(V(i.right-u)<=o)-(V(i.left-u)<=o),s=(V(i.bottom-d)<=o)-(V(i.top-d)<=o)),a||s||(a=(o>=h-u)-(o>=u),s=(o>=c-d)-(o>=d),(a||s)&&(r=O)),(z.vx!==a||z.vy!==s||z.el!==r)&&(z.el=r,z.vx=a,z.vy=s,clearInterval(z.pid),r&&(z.pid=setInterval(function(){r===O?O.scrollTo(O.pageXOffset+a*l,O.pageYOffset+s*l):(s&&(r.scrollTop+=s*l),a&&(r.scrollLeft+=a*l))},24)))}},30),X=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,r=this.el,i=this.options,a=e.type,s=e.touches&&e.touches[0],o=(s||e).target,l=o,d=i.filter;if(!("mousedown"===a&&0!==e.button||i.disabled)&&(o=n(o,i.draggable,r))){if(L=f(o),"function"==typeof d){if(d.call(this,e,o,this))return u(t,l,"filter",o,r,L),void e.preventDefault()}else if(d&&(d=d.split(",").some(function(e){return e=n(l,e.trim(),r),e?(u(t,e,"filter",o,r,L),!0):void 0})))return void e.preventDefault();(!i.handle||n(l,i.handle,r))&&this._prepareDragStart(e,s,o)}},_prepareDragStart:function(e,t,n){var r,a=this,o=a.el,u=a.options,d=o.ownerDocument;n&&!b&&n.parentNode===o&&(M=e,E=o,b=n,y=b.parentNode,A=b.nextSibling,_=u.group,r=function(){a._disableDelayedDrag(),b.draggable=!0,s(b,a.options.chosenClass,!0),a._triggerDragStart(t)},u.ignore.split(",").forEach(function(e){l(b,e.trim(),h)}),i(d,"mouseup",a._onDrop),i(d,"touchend",a._onDrop),i(d,"touchcancel",a._onDrop),u.delay?(i(d,"mouseup",a._disableDelayedDrag),i(d,"touchend",a._disableDelayedDrag),i(d,"touchcancel",a._disableDelayedDrag),i(d,"mousemove",a._disableDelayedDrag),i(d,"touchmove",a._disableDelayedDrag),a._dragStartTimer=setTimeout(r,u.delay)):r())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),a(e,"mouseup",this._disableDelayedDrag),a(e,"touchend",this._disableDelayedDrag),a(e,"touchcancel",this._disableDelayedDrag),a(e,"mousemove",this._disableDelayedDrag),a(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(M={target:b,clientX:e.clientX,clientY:e.clientY},this._onDragStart(M,"touch")):this.nativeDraggable?(i(b,"dragend",this),i(E,"dragstart",this._onDragStart)):this._onDragStart(M,!0);try{I.selection?I.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){E&&b&&(s(b,this.options.ghostClass,!0),e.active=this,u(this,E,"start",b,E,L))},_emulateDragOver:function(){if(D){if(this._lastX===D.clientX&&this._lastY===D.clientY)return;this._lastX=D.clientX,this._lastY=D.clientY,U||o(w,"display","none");var e=I.elementFromPoint(D.clientX,D.clientY),t=e,n=" "+this.options.group.name,r=G.length;if(t)do{if(t[P]&&t[P].options.groups.indexOf(n)>-1){for(;r--;)G[r]({clientX:D.clientX,clientY:D.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);U||o(w,"display","")}},_onTouchMove:function(t){if(M){e.active||this._dragStarted(),this._appendGhost();var n=t.touches?t.touches[0]:t,r=n.clientX-M.clientX,i=n.clientY-M.clientY,a=t.touches?"translate3d("+r+"px,"+i+"px,0)":"translate("+r+"px,"+i+"px)";H=!0,D=n,o(w,"webkitTransform",a),o(w,"mozTransform",a),o(w,"msTransform",a),o(w,"transform",a),t.preventDefault()}},_appendGhost:function(){if(!w){var e,t=b.getBoundingClientRect(),n=o(b),r=this.options;w=b.cloneNode(!0),s(w,r.ghostClass,!1),s(w,r.fallbackClass,!0),o(w,"top",t.top-q(n.marginTop,10)),o(w,"left",t.left-q(n.marginLeft,10)),o(w,"width",t.width),o(w,"height",t.height),o(w,"opacity","0.8"),o(w,"position","fixed"),o(w,"zIndex","100000"),o(w,"pointerEvents","none"),r.fallbackOnBody&&I.body.appendChild(w)||E.appendChild(w),e=w.getBoundingClientRect(),o(w,"width",2*t.width-e.width),o(w,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,r=this.options;this._offUpEvents(),"clone"==_.pull&&(x=b.cloneNode(!0),o(x,"display","none"),E.insertBefore(x,b)),t?("touch"===t?(i(I,"touchmove",this._onTouchMove),i(I,"touchend",this._onDrop),i(I,"touchcancel",this._onDrop)):(i(I,"mousemove",this._onTouchMove),i(I,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",r.setData&&r.setData.call(this,n,b)),i(I,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var r,i,a,s=this.el,l=this.options,u=l.group,h=u.put,m=_===u,f=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),H=!0,_&&!l.disabled&&(m?f||(a=!E.contains(b)):_.pull&&h&&(_.name===u.name||h.indexOf&&~h.indexOf(_.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(W(e,l,this.el),j)return;if(r=n(e.target,l.draggable,s),i=b.getBoundingClientRect(),a)return t(!0),void(x||A?E.insertBefore(b,x||A):f||E.appendChild(b));if(0===s.children.length||s.children[0]===w||s===e.target&&(r=p(s,e))){if(r){if(r.animated)return;v=r.getBoundingClientRect()}t(m),d(E,s,b,i,r,v)!==!1&&(b.contains(s)||(s.appendChild(b),y=s),this._animate(i,b),r&&this._animate(v,r))}else if(r&&!r.animated&&r!==b&&void 0!==r.parentNode[P]){N!==r&&(N=r,T=o(r),C=o(r.parentNode));var g,v=r.getBoundingClientRect(),k=v.right-v.left,S=v.bottom-v.top,L=/left|right|inline/.test(T.cssFloat+T.display)||"flex"==C.display&&0===C["flex-direction"].indexOf("row"),F=r.offsetWidth>b.offsetWidth,M=r.offsetHeight>b.offsetHeight,D=(L?(e.clientX-v.left)/k:(e.clientY-v.top)/S)>.5,z=r.nextElementSibling,B=d(E,s,b,i,r,v);if(B!==!1){if(j=!0,setTimeout(c,30),t(m),1===B||-1===B)g=1===B;else if(L){var O=b.offsetTop,I=r.offsetTop;g=O===I?r.previousElementSibling===b&&!F||D&&F:I>O}else g=z!==b&&!M||D&&M;b.contains(s)||(g&&!z?s.appendChild(b):r.parentNode.insertBefore(b,g?z:r)),y=b.parentNode,this._animate(i,b),this._animate(v,r)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var r=t.getBoundingClientRect();o(t,"transition","none"),o(t,"transform","translate3d("+(e.left-r.left)+"px,"+(e.top-r.top)+"px,0)"),t.offsetWidth,o(t,"transition","all "+n+"ms"),o(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){o(t,"transition",""),o(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;a(I,"touchmove",this._onTouchMove),a(e,"mouseup",this._onDrop),a(e,"touchend",this._onDrop),a(e,"touchcancel",this._onDrop)},_onDrop:function(t){var n=this.el,r=this.options;clearInterval(this._loopId),clearInterval(z.pid),clearTimeout(this._dragStartTimer),a(I,"mousemove",this._onTouchMove),this.nativeDraggable&&(a(I,"drop",this),a(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(H&&(t.preventDefault(),!r.dropBubble&&t.stopPropagation()),w&&w.parentNode.removeChild(w),b&&(this.nativeDraggable&&a(b,"dragend",this),h(b),s(b,this.options.ghostClass,!1),s(b,this.options.chosenClass,!1),E!==y?(F=f(b),F>=0&&(u(null,y,"sort",b,E,L,F),u(this,E,"sort",b,E,L,F),u(null,y,"add",b,E,L,F),u(this,E,"remove",b,E,L,F))):(x&&x.parentNode.removeChild(x),b.nextSibling!==A&&(F=f(b),F>=0&&(u(this,E,"update",b,E,L,F),u(this,E,"sort",b,E,L,F)))),e.active&&((null===F||-1===F)&&(F=L),u(this,E,"end",b,E,L,F),this.save())),E=b=y=w=A=x=k=S=M=D=H=F=N=T=_=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?b&&(this._onDragOver(e),r(e)):("drop"===t||"dragend"===t)&&this._onDrop(e)},toArray:function(){for(var e,t=[],r=this.el.children,i=0,a=r.length,s=this.options;a>i;i++)e=r[i],n(e,s.draggable,this.el)&&t.push(e.getAttribute(s.dataIdAttr)||m(e));return t},sort:function(e){var t={},r=this.el;this.toArray().forEach(function(e,i){var a=r.children[i];n(a,this.options.draggable,r)&&(t[e]=a)},this),e.forEach(function(e){t[e]&&(r.removeChild(t[e]),r.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&X(n)))},destroy:function(){var e=this.el;e[P]=null,a(e,"mousedown",this._onTapStart),a(e,"touchstart",this._onTapStart),this.nativeDraggable&&(a(e,"dragover",this),a(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),G.splice(G.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:i,off:a,css:o,find:l,is:function(e,t){return!!n(e,t,e)},extend:v,throttle:g,closest:n,toggleClass:s,index:f},e.create=function(t,n){return new e(t,n)},e.version="1.4.2",e});var hashedit=hashedit||{};hashedit=function(){"use strict";return{url:null,previewUrl:null,title:"",saveUrl:"/api/pages/save",addPageURL:"/api/pages/add",pageSettingsURL:"/api/pages/settings",uploadUrl:"/api/images/add",imagesListUrl:"/api/images/list",pagesListUrl:"/api/pages/list",authUrl:"/api/auth",loginUrl:"/login",pathListUrl:"/api/pages/path/list",imagesListLoaded:!1,pagesListLoaded:!1,pathListLoaded:!1,debug:!1,demo:!1,menu:[],path:"/node_modules/hashedit/",stylesheet:["/node_modules/hashedit/dist/hashedit-min.css"],current:{container:null,node:null,parent:null,element:null,image:null},grid:[{name:"1 Column",desc:"100%",html:'<div class="block row" hashedit-block><div class="col col-md-12" hashedit-sortable></div></div>'},{name:"2 Column",desc:"100%",html:'<div class="block row" hashedit-block><div class="col col-md-6" hashedit-sortable></div><div class="col col-md-6" hashedit-sortable></div></div>'}],selection:null,elementMenu:'<span class="hashedit-element-menu"><span class="hashedit-move"><span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;"><g><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path></g></svg></span></span><span class="hashedit-properties"><span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g></svg></span></span><span class="hashedit-remove"><span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g></svg></span></span></span>',framework:"bootstrap",frameworkDefaults:{bootstrap:{table:"table",image:"img-responsive",code:""},foundation:{table:"",image:"",code:""},mdl:{table:"mdl-data-table",image:"",code:""}},isI18nInit:!1,setActive:function(){document.querySelector("body").setAttribute("hashedit-active","")},setContentEditable:function(){var e,t;for(t=document.querySelectorAll("p[hashedit-element], [hashedit] h1[hashedit-element], [hashedit] h2[hashedit-element], h3[hashedit-element], h4[hashedit-element], h5[hashedit-element], span[hashedit-element], ul[hashedit-element] li, ol[hashedit-element] li, table[hashedit-element] td, table[hashedit-element] th, blockquote[hashedit-element], pre[hashedit-element]"),e=0;e<t.length;e+=1)t[e].setAttribute("contentEditable","true")},setupEmpty:function(){var e,t;for(t=document.querySelectorAll("[hashedit-sortable]"),e=0;e<t.length;e+=1)null===t[e].firstElementChild?t[e].setAttribute("hashedit-empty","true"):t[e].removeAttribute("hashedit-empty")},setupBlocks:function(){var e,t,n,r,i,a,s;for(r=hashedit.config.blocks,e=document.querySelectorAll("[hashedit] "+r),t=0;t<e.length;t+=1)null===e[t].querySelector(".hashedit-block-menu")&&(e[t].setAttribute("hashedit-block",""),n=document.createElement("DIV"),n.setAttribute("class","hashedit-block-menu"),n.innerHTML='<span class="hashedit-block-properties"><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g></svg></span><span class="hashedit-block-remove"><svg xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 24 24" width="100%"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span><span class="hashedit-block-duplicate"><svg xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 24 24" width="100%"><path d="M0 0h24v24H0z" fill="none"/><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg></span><span class="hashedit-block-down"><svg xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 24 24" width="100%"><path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"/><path d="M0-.75h24v24H0z" fill="none"/></svg></span><span class="hashedit-block-up"><svg xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 24 24" width="100%"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span><span class="hashedit-block-add"><svg xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 24 24" width="100%"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span>',e[t].appendChild(n)),a=e[t].nextElementSibling,i=e[t].querySelector(".hashedit-block-down"),null!==a&&a.matches("[hashedit] "+r)?null!==i&&(i.style.display="block"):null!==i&&(i.style.display="none"),s=e[t].previousElementSibling,i=e[t].querySelector(".hashedit-block-up"),null!==s&&s.matches("[hashedit] "+r)?null!==i&&(i.style.display="block"):null!==i&&(i.style.display="none")},setupSortable:function(){var e,t,n,r,i,a,s,o,l;for(l=hashedit.config.sortable,e=0;e<l.length;e+=1)for(n=document.querySelectorAll("[hashedit] "+l[e]),t=0;t<n.length;t+=1)n[t].setAttribute("hashedit-sortable","");for(n=document.querySelectorAll("[hashedit-sortable] > *"),t=0;t<n.length;t+=1)n[t].setAttribute("hashedit-element",""),o=document.createElement("span"),o.setAttribute("class","hashedit-element-menu"),r=document.createElement("span"),r.setAttribute("class","hashedit-move"),r.innerHTML='<span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;"><g><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path></g></svg></span>',o.appendChild(r),r=document.createElement("span"),r.setAttribute("class","hashedit-properties"),r.innerHTML='<span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g></svg></span>',o.appendChild(r),r=document.createElement("span"),r.setAttribute("class","hashedit-remove"),r.innerHTML='<span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g></svg></span>',o.appendChild(r),n[t].appendChild(o);for(n=document.querySelectorAll("[hashedit] [hashedit-sortable]"),e=0;e<n.length;e+=1)i=n[e],s=new Sortable(i,{group:"hashedit-sortable",sort:!0,delay:0,disabled:!1,store:null,animation:150,handle:".hashedit-move",ghostClass:"hashedit-highlight",scroll:!0,scrollSensitivity:30,scrollSpeed:10,onEnd:function(e){a=e.item,hashedit.setupEmpty()}});hashedit.setupEmpty()},setupMenu:function(){var e,t,n,r,i;if(e=document.createElement("menu"),e.setAttribute("class","hashedit-top-menu"),e.innerHTML='<button class="hashedit-back"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg></button><h2>'+hashedit.title+'</h2><button class="hashedit-focused"><i class="material-icons">create</i></button><button class="hashedit-view"><i class="material-icons">launch</i></button><button class="hashedit-add"><i class="material-icons">add</i></button>',hashedit.current.container.appendChild(e),e=document.createElement("menu"),e.setAttribute("class","hashedit-menu"),e.innerHTML='<div class="hashedit-menu-body"></div>',hashedit.current.container.appendChild(e),e=document.createElement("menu"),e.setAttribute("class","hashedit-bottom-menu"),e.innerHTML='<button class="hashedit-save" exit>Save and Exit</button><button class="hashedit-save primary">Save</button>',hashedit.current.container.appendChild(e),null!=document.querySelector(".hashedit-back")&&document.querySelector(".hashedit-back").addEventListener("click",function(){history.go(-1)}),null!=document.querySelector(".hashedit-add")&&document.querySelector(".hashedit-add").addEventListener("click",function(){e=document.querySelector(".hashedit-menu"),1==e.hasAttribute("active")?e.removeAttribute("active"):e.setAttribute("active",!0)}),null!=document.querySelector(".hashedit-view")){var a=document.querySelector(".hashedit-view");a.addEventListener("click",function(e){window.open(hashedit.previewUrl,"_blank")})}if(null!=document.querySelector(".hashedit-focused")){var a=document.querySelector(".hashedit-focused");null==document.querySelector("[focused-content]")&&(a.style.display="none"),a.addEventListener("click",function(e){var t=window.location.href.replace("mode=page","mode=focused"),n=window.parent.document.getElementsByTagName("iframe")[0];n.setAttribute("src",t),console.log(n)})}if(null!=document.querySelector(".hashedit-save"))for(var r=document.querySelectorAll(".hashedit-save"),i=0;i<r.length;i++)r[i].addEventListener("click",function(e){var r=e.target;r.setAttribute("disabled","disabled"),hashedit.demo===!0?(r.removeAttribute("disabled"),hashedit.showToast("Cannot save in demo mode","failure")):(t=hashedit.retrieveUpdateArray(),hashedit.saveUrl&&(n=new XMLHttpRequest,n.open("post",hashedit.saveUrl,!0),1==hashedit.useToken&&n.setRequestHeader(hashedit.authHeader,hashedit.authHeaderPrefix+" "+localStorage.getItem(hashedit.tokenName)),n.send(JSON.stringify(t)),n.onloadend=function(){hashedit.showToast('<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>',"success"),r.removeAttribute("disabled"),1==r.hasAttribute("exit")?hashedit.debug===!1&&history.go(-1):location.reload()}))})},setupDraggable:function(){var e,t,n,r,i,a;t=document.querySelector(".hashedit-menu-body"),r=new Sortable(t,{group:{name:"hashedit-sortable",pull:"clone",put:!1},draggable:"a",sort:!1,delay:0,disabled:!1,animation:150,ghostClass:"hashedit-highlight",scroll:!0,scrollSensitivity:30,scrollSpeed:10,onStart:function(e){document.querySelector(".hashedit-menu").removeAttribute("active")},onEnd:function(t){for(i=t.item,hashedit.debug===!0&&console.log(i),n=i.getAttribute("data-selector"),e=0;e<hashedit.menu.length;e+=1)if(hashedit.menu[e].selector==n){a=hashedit.menu[e].html,a=hashedit.replaceAll(a,"{{path}}",hashedit.path),a=hashedit.replaceAll(a,"{{framework.image}}",hashedit.frameworkDefaults[hashedit.framework].image),a=hashedit.replaceAll(a,"{{framework.table}}",hashedit.frameworkDefaults[hashedit.framework].table),a=hashedit.replaceAll(a,"{{framework.code}}",hashedit.frameworkDefaults[hashedit.framework].code);var r=hashedit.append(a);void 0!=hashedit.menu[e].view&&(r.innerHTML+=hashedit.menu[e].view)}hashedit.setupEmpty();var s=document.querySelector(".hashedit-help");return null!=s&&(s.innerHTML="",s.removeAttribute("active")),!1}})},loadHTML:function(e){var t,n;fetch(e+"html/modals.html").then(function(e){return e.text()}).then(function(e){for(n=document.createElement("div"),n.innerHTML=e,t=0;t<n.childNodes.length;t+=1)hashedit.current.container.appendChild(n.childNodes[t]);for(t=0;t<hashedit.menu.length;t+=1)hashedit.menu[t].init&&hashedit.menu[t].init();hashedit.setupConfigEvents(),hashedit.setupTextEvents(),hashedit.setupModalEvents()})},createMenu:function(){var e,t,n,r=[{selector:"H1",title:"H1 Headline",display:"H1",html:"<h1>"+hashedit.i18n("Tap to update")+"</h1>"},{selector:"h2",title:"H2 Headline",display:"H2",html:"<h2>"+hashedit.i18n("Tap to update")+"</h2>"},{selector:"h3",title:"H3 Headline",display:"H3",html:"<h3>"+hashedit.i18n("Tap to update")+"</h3>"},{selector:"h4",title:"H4 Headline",display:"H4",html:"<h4>"+hashedit.i18n("Tap to update")+"</h4>"},{selector:"h5",title:"H5 Headline",display:"H5",html:"<h5>"+hashedit.i18n("Tap to update")+"</h5>"},{selector:"p",title:"Paragraph",display:"P",html:"<p>"+hashedit.i18n("Tap to update")+"</p>"},{selector:"blockquote",title:"Blockquote",display:'<i class="material-icons">format_quote</i>',html:"<blockquote>"+hashedit.i18n("Tap to update")+"</blockquote>"},{selector:"ul",title:"Unordered List",display:'<i class="material-icons">format_list_bulleted</i>',html:"<ul><li>"+hashedit.i18n("Tap to update")+"</li></ul>"},{selector:"ol",title:"Ordered List",display:'<i class="material-icons">format_list_numbered</i>',html:"<ol><li></li></ol>"},{selector:"hr",title:"Break",display:'<i class="material-icons">remove</i>',html:"<hr>"},{selector:"img",title:"Image",display:'<i class="material-icons">insert_photo</i>',html:'<p><img src="{{path}}images/placeholder.png" class="{{framework.image}}"></p>',
configure:function(){hashedit.showImageDialog()}},{selector:"table[rows]",title:"Table",display:'<i class="material-icons">grid_on</i>',html:'<table class="{{framework.table}}" rows="1" columns="2"><thead><tr><th>Header</th><th>Header</th></tr></thead><tbody><tr><td>Content</td><td>Content</td></tr></tbody></table>',attributes:[{attr:"rows",label:"Rows",type:"select",values:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]},{attr:"columns",label:"Columns",type:"select",values:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"]}],change:function(e,t,n){var r,i,a,s,o,l,u,d,h,c,p,m,f,g;if(t!=n)if("columns"==e){if(o=t,l=n,o>l)for(u=o-l,h=hashedit.current.node,c=hashedit.current.node.getElementsByTagName("tr"),r=0;r<c.length;r+=1)for(i=0;u>i;i+=1)"THEAD"==c[r].parentNode.nodeName?(p=document.createElement("th"),p.setAttribute("contentEditable","true"),p.innerHTML="New Header",c[r].appendChild(p)):(f=document.createElement("td"),f.setAttribute("contentEditable","true"),f.innerHTML="Content",c[r].appendChild(f));else if(l>o)for(d=l-o,h=hashedit.current.node,c=hashedit.current.node.getElementsByTagName("tr"),r=0;r<c.length;r+=1)for(i=0;d>i;i+=1)"THEAD"==c[r].parentNode.nodeName?c[r].querySelector("th:last-child").remove():c[r].querySelector("td:last-child").remove()}else if("rows"==e)if(a=t,s=n,h=hashedit.current.node,o=h.querySelectorAll("thead tr:first-child th").length,a>s)for(u=a-s,i=0;u>i;i+=1){for(m=document.createElement("tr"),r=0;o>r;r+=1)f=document.createElement("td"),f.setAttribute("contentEditable","true"),f.innerHTML="Content",m.appendChild(f);g=h.getElementsByTagName("tbody")[0],g.appendChild(m)}else if(s>a)for(d=s-a,i=0;d>i;i+=1)m=h.querySelector("tbody tr:last-child"),null!==m&&m.remove()}},{selector:"pre",title:"Code",display:'<i class="material-icons">code</i>',html:"<pre>Start adding code</pre>"},{selector:"[respond-html]",title:"HTML",display:"HTML",html:"<div respond-html>"+hashedit.i18n("Tap settings to edit HTML")+"</div>"}];for(hashedit.menu=r.concat(hashedit.menu),e=0;e<hashedit.menu.length;e+=1)t=hashedit.menu[e],n=document.createElement("a"),n.setAttribute("title",t.title),n.setAttribute("data-selector",t.selector),n.innerHTML='<span class="icon">'+t.display+'</span><span class="title">'+t.title+"</span>",document.querySelector(".hashedit-menu-body").appendChild(n);hashedit.setupDraggable()},setupView:function(){var e,t,n;for(e=0;e<hashedit.menu.length;e+=1)if(void 0!==hashedit.menu[e].view)for(n=document.querySelectorAll(hashedit.menu[e].selector),t=0;t<n.length;t++)n[t].innerHTML=hashedit.menu[e].view},showTextOptions:function(e){var t,n,r,i,a;for(hashedit.current.element=e,hashedit.current.node=e,hashedit.current.element.hasAttribute("hashedit-element")===!1&&(hashedit.current.element=hashedit.findParentBySelector(e,"[hashedit-element]")),r=document.querySelector("#hashedit-image-settings-modal"),r.removeAttribute("visible"),n=document.querySelector("#hashedit-link-settings-modal"),n.removeAttribute("visible"),i=document.querySelector("#hashedit-text-settings"),i.setAttribute("visible",""),a=document.querySelectorAll("[data-model]"),t=0;t<a.length;t+=1)"SELECT"==a[t].nodeType?a[t].selectedIndex=0:a[t].value="";hashedit.bind()},bind:function(){var e,t,n,r,i,a,s;if(console.log(hashedit.current.node),null!==hashedit.current.node){for(e=hashedit.current.node.attributes,t=0;t<e.length;t+=1)for(r=e[t].nodeName.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}),i=e[t].nodeValue,!isNaN(parseFloat(i))&&isFinite(i)&&(i=parseFloat(i)),s=document.querySelectorAll('[data-model="node.'+r+'"]'),n=0;n<s.length;n+=1)s[n].value=i;for(a=hashedit.current.node.innerHTML,a=hashedit.replaceAll(a,hashedit.elementMenu,""),s=document.querySelectorAll('[data-model="node.html"]'),n=0;n<s.length;n+=1)s[n].value=a}},setupContentEditableEvents:function(){var e,t,n,r,i,a,s,o,l,u,d,h,c,p,m,f,g,v,b,y,w,x,c,E;for(document.addEventListener("paste",function(e){if("TEXTAREA"==e.target.nodeName);else{e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}}),r=document.querySelectorAll("body"),e=0;e<r.length;e+=1)["click","focus"].forEach(function(l){r[e].addEventListener(l,function(r){if(r.target.hasAttribute("hashedit-element")){m=r.target;var l=hashedit.getTextNodeValue(m);l===hashedit.i18n("Tap to update")&&document.execCommand("selectAll",!1,null)}else m=hashedit.findParentBySelector(r.target,"[hashedit-element]");for(c=document.querySelectorAll("[current-hashedit-element]"),t=0;t<c.length;t+=1)c[t].removeAttribute("current-hashedit-element");if(m&&m.setAttribute("current-hashedit-element","true"),null!==hashedit.findParentBySelector(r.target,".hashedit-remove"))m.remove();else if(null!==hashedit.findParentBySelector(r.target,".hashedit-properties")){for(hashedit.current.node=m,p=!0,x=null,e=0;e<hashedit.menu.length;e+=1)m.matches(hashedit.menu[e].selector)&&(x=hashedit.menu[e],hashedit.menu[e].configure&&(p=!1,hashedit.menu[e].configure()));if(p===!0){for(u=document.getElementById("hashedit-element-settings-modal"),f=u.querySelector(".hashedit-modal-body"),c=f.querySelectorAll(".hashedit-custom-attr"),t=0;t<c.length;t++)c[t].parentNode.removeChild(c[t]);if(null!=x&&x.attributes)for(t=0;t<x.attributes.length;t++){if(g=x.attributes[t],v=document.createElement("div"),v.setAttribute("class","hashedit-custom-attr"),b=document.createElement("label"),b.innerHTML=g.label,v.appendChild(b),"text"==g.type&&(y=document.createElement("input"),y.setAttribute("type","text"),y.setAttribute("data-model","node."+g.attr),y.setAttribute("name","attr"),v.appendChild(y)),"select"==g.type){if(y=document.createElement("select"),y.setAttribute("data-model","node."+g.attr),y.setAttribute("name","attr"),null!=g.values)for(n=0;n<g.values.length;n++)w=document.createElement("option"),g.values[n].text?(w.setAttribute("value",g.values[n].value),w.innerHTML=g.values[n].text):(w.setAttribute("value",g.values[n]),w.innerHTML=g.values[n]),y.appendChild(w);v.appendChild(y)}f.appendChild(v)}hashedit.bind(),u.setAttribute("visible","true")}}else if(null!==hashedit.findParentBySelector(r.target,".hashedit-block-add"))E=hashedit.findParentBySelector(r.target,"[hashedit-block]"),null!==E&&hashedit.showLayoutDialog(E);else if(null!==hashedit.findParentBySelector(r.target,".hashedit-block-properties")){if(E=hashedit.findParentBySelector(r.target,"[hashedit-block]"),null!==E){var u=document.getElementById("hashedit-block-settings-modal");u.setAttribute("visible","true"),hashedit.current.node=E,hashedit.bind()}}else if(null!==hashedit.findParentBySelector(r.target,".hashedit-block-up"))E=hashedit.findParentBySelector(r.target,"[hashedit-block]"),null!=E.previousElementSibling&&E.previousElementSibling.hasAttribute("hashedit-block")===!0&&E.parentNode.insertBefore(E,E.previousElementSibling),hashedit.setupBlocks();else if(null!==hashedit.findParentBySelector(r.target,".hashedit-block-down"))E=hashedit.findParentBySelector(r.target,"[hashedit-block]"),null!=E.nextElementSibling&&E.nextElementSibling.hasAttribute("hashedit-block")===!0&&E.nextElementSibling.parentNode.insertBefore(E.nextElementSibling,E),hashedit.setupBlocks();else if(null!==hashedit.findParentBySelector(r.target,".hashedit-block-remove"))E=hashedit.findParentBySelector(r.target,"[hashedit-block]"),E.remove(),hashedit.setupBlocks();else if(null!==hashedit.findParentBySelector(r.target,".hashedit-block-duplicate"))E=hashedit.findParentBySelector(r.target,"[hashedit-block]"),hashedit.duplicateBlock(E,"before"),hashedit.setupBlocks();else if("A"==r.target.nodeName){for(i=document.querySelectorAll("[hashedit]"),a=!1,e=0;e<i.length;e+=1)i[e].contains(r.target)===!0&&(a=!0);a&&hashedit.showLinkDialog()}else if("IMG"==r.target.nodeName){for(hashedit.current.node=r.target,hashedit.current.image=r.target,i=document.querySelectorAll("[hashedit]"),a=!1,e=0;e<i.length;e+=1)i[e].contains(r.target)===!0&&(a=!0);a&&hashedit.showImageDialog()}else if(r.target.hasAttribute("contentEditable"))hashedit.showTextOptions(r.target);else if(r.target.parentNode.hasAttribute("contentEditable")&&r.target.parentNode)hashedit.showTextOptions(r.target);else if("dz-hidden-input"==r.target.className);else{for(s=document.querySelectorAll(".hashedit-config, .hashedit-modal, .hashedit-menu"),o=!1,e=0;e<s.length;e+=1)s[e].contains(r.target)===!0&&(o=!0);if(o===!1)for(e=0;e<s.length;e+=1)s[e].removeAttribute("visible")}})}),["input"].forEach(function(t){r[e].addEventListener(t,function(e){if(e.target.hasAttribute("contentEditable"))for(l=e.target;null!==l;){l.childNodes[0];hashedit.debug===!0&&(console.log("input event"),console.log(l.nodeName));var t=hashedit.getTextNodeValue(l);""===t&&(t=document.createTextNode(hashedit.i18n("Tap to update")),l.insertBefore(t,l.firstChild),document.execCommand("selectAll",!1,null)),u=l.innerHTML,u=hashedit.replaceAll(u,"&nbsp;"," "),u=u.trim(),l=null}})}),["keydown"].forEach(function(t){r[e].addEventListener(t,function(e){if(e.target.hasAttribute("contentEditable")){if(l=e.target,13===e.keyCode)if("LI"==l.nodeName)d=document.createElement("li"),d.setAttribute("contentEditable",!0),l.parentNode.appendChild(d),l.parentNode.lastChild.focus(),e.preventDefault(),e.stopPropagation();else if("P"==l.nodeName){var t=hashedit.append("<p>"+hashedit.i18n("Tap to update")+"</p>");hashedit.current.node=t,e.preventDefault(),e.stopPropagation()}8===e.keyCode&&"LI"==l.nodeName&&""===l.innerHTML&&(null!==l.previousSibling&&(h=l.parentNode,l.remove(),h.lastChild.focus()),e.preventDefault(),e.stopPropagation())}})})},getTextNodeValue:function(e){for(var t="",n=0;n<e.childNodes.length;n++){var r=e.childNodes[n],i=/^\s*$/;if(void 0===r){t="";break}if("#text"===r.nodeName&&!i.test(r.nodeValue)){t=r.nodeValue;break}}return t},selectElementContents:function(e){var t,n;t=document.createRange(),t.selectNodeContents(e),n=window.getSelection(),n.removeAllRanges(),n.addRange(t)},append:function(e){function t(e){var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}var n,r,i;r=document.createElement("div"),r.innerHTML=e,r=r.childNodes[0],r.setAttribute("hashedit-element",""),r.innerHTML+=hashedit.elementMenu,i=document.querySelector("[hashedit-sortable] [data-selector]"),null===i?null!==hashedit.current.node&&hashedit.current.node.parentNode.insertBefore(r,hashedit.current.node.nextSibling):i.parentNode.replaceChild(r,i);var a="p, h1, h2, h3, h4, h5, li, td, th, blockquote, pre",s=r.querySelectorAll(a);for(n=0;n<s.length;n+=1)s[n].setAttribute("contentEditable","true");return-1!=a.indexOf(r.nodeName.toLowerCase())&&r.setAttribute("contentEditable","true"),s.length>0?(s[0].focus(),t(s[0]),hashedit.showTextOptions(s[0]),hashedit.selectElementContents(s[0])):r.matches(a)&&(r.focus(),t(r)),r},duplicateBlock:function(e,t){var n;return n=e.cloneNode(!0),"before"==t&&e.parentNode.insertBefore(n,e),hashedit.setupSortable(),n},appendBlock:function(e,t,n){var r;return r=document.createElement("div"),r.innerHTML=e,r=r.childNodes[0],"before"==n&&t.parentNode.insertBefore(r,t),hashedit.setupSortable(),r},setupModalEvents:function(){var e,t,n,r,i,a,s,o,l;if(void 0!=Dropzone&&null!=Dropzone){var l={url:hashedit.uploadUrl};1==hashedit.useToken&&(l.headers={},l.headers[hashedit.authHeader]=hashedit.authHeaderPrefix+" "+localStorage.getItem(hashedit.tokenName)),t=new Dropzone("#hashedit-dropzone",l),t.on("complete",function(e){t.removeFile(e)}),t.on("success",function(e,t){var n="files/"+e.name;o=document.getElementById("hashedit-image-src"),o.value=n,i=document.getElementById("images-list"),a=document.createElement("div"),a.setAttribute("class","hashedit-list-item"),a.innerHTML="images/"+n,a.setAttribute("data-value","images/"+n),i.appendChild(a),o.dispatchEvent(new Event("input",{bubbles:!0})),r=document.getElementById("hashedit-image-settings-modal"),r.removeAttribute("hashedit-card-flipped")})}for(i=document.getElementById("images-list"),["click"].forEach(function(e){i.addEventListener(e,function(e){e.target.hasAttribute("data-value")===!0&&(s=e.target.getAttribute("data-value"),o=document.getElementById("hashedit-image-src"),o.value=s,o.dispatchEvent(new Event("input",{bubbles:!0})),r=document.getElementById("hashedit-image-settings-modal"),r.removeAttribute("hashedit-card-flipped"))})}),i=document.getElementById("pages-list"),["click"].forEach(function(e){i.addEventListener(e,function(e){e.target.hasAttribute("data-value")===!0&&(s=e.target.getAttribute("data-value"),o=document.getElementById("hashedit-link-href"),o.value=s,o.dispatchEvent(new Event("input",{bubbles:!0})),r=document.getElementById("hashedit-link-settings-modal"),r.removeAttribute("hashedit-card-flipped"))})}),n=document.querySelectorAll(".toggle-select-image"),e=0;e<n.length;e+=1)["click"].forEach(function(t){n[e].addEventListener(t,function(t){if(r=document.querySelector("#hashedit-image-settings-modal"),r.hasAttribute("hashedit-card-flipped")?r.removeAttribute("hashedit-card-flipped"):r.setAttribute("hashedit-card-flipped","true"),hashedit.imagesListLoaded===!1){var n={credentials:"include"};hashedit.useToken&&(n={headers:{}},n.headers[hashedit.authHeader]=hashedit.authHeaderPrefix+" "+localStorage.getItem(hashedit.tokenName)),fetch(hashedit.imagesListUrl,n).then(function(e){return e.json()}).then(function(t){for(i=document.getElementById("images-list"),i.innerHTML="",e=0;e<t.length;e+=1)a=document.createElement("div"),a.setAttribute("class","hashedit-list-item"),a.innerHTML=t[e],a.setAttribute("data-value",t[e]),i.appendChild(a);hashedit.imagesListLoaded=!0})["catch"](function(e){console.log("parsing failed",e)})}})});for(n=document.querySelectorAll(".toggle-select-url"),e=0;e<n.length;e+=1)["click"].forEach(function(t){n[e].addEventListener(t,function(t){if(r=document.querySelector("#hashedit-link-settings-modal"),r.hasAttribute("hashedit-card-flipped")?r.removeAttribute("hashedit-card-flipped"):r.setAttribute("hashedit-card-flipped","true"),hashedit.pagesListLoaded===!1){var n={credentials:"include"};hashedit.useToken&&(n={headers:{}},n.headers[hashedit.authHeader]=hashedit.authHeaderPrefix+" "+localStorage.getItem(hashedit.tokenName)),fetch(hashedit.pagesListUrl,n).then(function(e){return e.json()}).then(function(t){for(i=document.getElementById("pages-list"),i.innerHTML="",e=0;e<t.length;e+=1)a=document.createElement("div"),a.setAttribute("class","hashedit-list-item"),a.innerHTML=t[e].url,a.setAttribute("data-value",t[e].url),i.appendChild(a);hashedit.pagesListLoaded=!0})["catch"](function(e){console.log("parsing failed",e)})}})})},setupConfigEvents:function(){var e,t,n,r,i,a,s,o,l;for(t=document.querySelectorAll(".hashedit-config, .hashedit-modal"),e=0;e<t.length;e+=1)["propertychange","change","click","keyup","input","paste"].forEach(function(u){t[e].addEventListener(u,function(t){if(n=t.target,n.hasAttribute("hashedit-cancel-modal"))for(r=document.querySelectorAll(".hashedit-modal"),e=0;e<r.length;e+=1)r[e].removeAttribute("visible");if(n.hasAttribute("data-model")){if(i=n.getAttribute("data-model"),a="",s="",a=n.value,-1!=i.indexOf("node.")&&(o=i.split("."),o.length>1))if(s=o[1].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),"html"===s)hashedit.current.node.innerHTML=a+hashedit.elementMenu;else{var u=hashedit.current.node.getAttribute(s);for(hashedit.current.node.setAttribute(s,a),hashedit.debug===!0&&(console.log("setattribute on [data-model]"),console.log("attr="+s+"value="+a)),l=hashedit.createTextStyle(hashedit.current.node),hashedit.current.node.setAttribute("style",l),e=0;e<hashedit.menu.length;e+=1)hashedit.current.node.matches(hashedit.menu[e].selector)&&hashedit.menu[e].change&&hashedit.menu[e].change(s,a,u)}-1!=i.indexOf("link.")&&(o=i.split("."),o.length>1&&(s=o[1].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),hashedit.currLink.setAttribute(s,a),null==hashedit.current.node&&(hashedit.current.node=hashedit.findParentBySelector(hashedit.currLink,"[hashedit-element]")),hashedit.current.node.dispatchEvent(new Event("input",{bubbles:!0})))),-1!=i.indexOf("image.")&&(o=i.split("."),o.length>1&&(s=o[1].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),hashedit.current.image.setAttribute(s,a),hashedit.current.node=hashedit.findParentBySelector(hashedit.current.image,"[hashedit-element]"),null!==hashedit.current.node&&hashedit.current.node.dispatchEvent(new Event("input",{bubbles:!0}))))}},!1)})},setupTextEvents:function(){var e,t,n,r,i,a,s,o;for(t=document.querySelectorAll(".hashedit-config"),e=0;e<t.length;e+=1)["mousedown","touchstart"].forEach(function(l){t[e].addEventListener(l,function(e){if(n=e.target,"A"!==n.nodeName&&(n=hashedit.findParentBySelector(n,"[data-action]")),n.hasAttribute("data-action")){if(r=n.getAttribute("data-action"),"hashedit.text.bold"==r)return document.execCommand("Bold",!1,null),!1;if("hashedit.text.italic"==r)return document.execCommand("Italic",!1,null),!1;if("hashedit.text.strike"==r)return document.execCommand("strikeThrough",!1,null),!1;if("hashedit.text.subscript"==r)return document.execCommand("subscript",!1,null),!1;if("hashedit.text.superscript"==r)return document.execCommand("superscript",!1,null),!1;if("hashedit.text.underline"==r)return document.execCommand("underline",!1,null),!1;if("hashedit.text.link"==r)return i=hashedit.getSelectedText(),a="<a>"+i+"</a>",document.execCommand("insertHTML",!1,a),hashedit.showLinkDialog(),!1;if("hashedit.text.image"==r)return i=hashedit.getSelectedText(),a='<img src="{{path}}images/placeholder-inline.png" class="pull-left">',a=hashedit.replaceAll(a,"{{path}}",hashedit.path),document.execCommand("insertHTML",!1,a),!1;if("hashedit.text.code"==r)return i=hashedit.getSelectedText(),a="<code>"+i+"</code>",document.execCommand("insertHTML",!1,a),!1;if("hashedit.text.alignLeft"==r)return s=document.querySelector('.hashedit-modal [data-model="node.class"]'),o=s.value,o=hashedit.replaceAll(o,"text-center",""),o=hashedit.replaceAll(o,"text-left",""),o=hashedit.replaceAll(o,"text-right",""),o+=" text-left",console.log(o),s.value=o.trim(),s.dispatchEvent(new Event("change",{bubbles:!0})),!1;if("hashedit.text.alignRight"==r)return s=document.querySelector('.hashedit-modal [data-model="node.class"]'),o=s.value,o=hashedit.replaceAll(o,"text-center",""),o=hashedit.replaceAll(o,"text-left",""),o=hashedit.replaceAll(o,"text-right",""),o+=" text-right",s.value=o.trim(),s.dispatchEvent(new Event("change",{bubbles:!0})),!1;if("hashedit.text.alignCenter"==r)return s=document.querySelector('.hashedit-modal [data-model="node.class"]'),o=s.value,o=hashedit.replaceAll(o,"text-center",""),o=hashedit.replaceAll(o,"text-left",""),o=hashedit.replaceAll(o,"text-right",""),o+=" text-center",s.value=o.trim(),s.dispatchEvent(new Event("change",{bubbles:!0})),!1;if("hashedit.text.undo"==r)return document.execCommand("undo",!1,null),!1}},!1)})},showLinkDialog:function(){var e,t,n,r,i,a;hashedit.currLink=hashedit.getLinkFromSelection(),null!==hashedit.currLink&&(e=hashedit.currLink.getAttribute("id")||"",t=hashedit.currLink.getAttribute("class")||"",n=hashedit.currLink.getAttribute("href")||"",r=hashedit.currLink.getAttribute("target")||"",i=hashedit.currLink.getAttribute("title")||"",a=document.querySelector("#hashedit-link-settings-modal"),a.setAttribute("visible",""),document.getElementById("hashedit-link-id").value=e,document.getElementById("hashedit-link-cssclass").value=t,document.getElementById("hashedit-link-href").value=n,document.getElementById("hashedit-link-target").value=r,document.getElementById("hashedit-link-title").value=i)},showLayoutDialog:function(e){var t,n,r,i,a,s,o,l;if(null!==e&&e.setAttribute("hashedit-block-active",""),n=document.querySelector("#hashedit-layout-modal"),r=document.querySelector("#hashedit-layouts-list"),l=r.querySelectorAll(".hashedit-list-item"),0===l.length){for(t=0;t<hashedit.grid.length;t++)a=document.createElement("DIV"),a.setAttribute("class","hashedit-list-item"),a.setAttribute("data-index",t),a.innerHTML="<h2>"+hashedit.grid[t].name+"</h2><small>"+hashedit.grid[t].desc+"</small>",r.appendChild(a);r.addEventListener("click",function(t){s=t.target,"DIV"!==s.nodeName.toUpperCase()&&(s=hashedit.findParentBySelector(s,".hashedit-list-item")),null!=s&&(o=s.getAttribute("data-index"),i=hashedit.grid[o].html,hashedit.appendBlock(i,e,"before"),hashedit.setupBlocks(),n.removeAttribute("visible"))})}n.setAttribute("visible","")},showImageDialog:function(){var e,t,n,r,i,a;null!==hashedit.current.node&&(e=hashedit.current.node.getAttribute("id")||"",t=hashedit.current.node.getAttribute("class")||"",n=hashedit.current.node.getAttribute("src")||"",i=hashedit.current.node.getAttribute("alt")||"",a=hashedit.current.node.getAttribute("title")||"",r=document.querySelector("#hashedit-image-settings-modal"),r.setAttribute("visible",""),document.getElementById("hashedit-image-id").value=e,document.getElementById("hashedit-image-cssclass").value=t,document.getElementById("hashedit-image-src").value=n,document.getElementById("hashedit-image-alt").value=i,document.getElementById("hashedit-image-title").value=a)},executeFunctionByName:function(e,t){var n,r,i,a;for(r=[].slice.call(arguments).splice(2),i=e.split("."),a=i.pop(),n=0;n<i.length;n++)t=t[i[n]];return t[a].apply(this,r)},getSelectedText:function(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},saveSelection:function(){var e,t,n,r;if(window.getSelection){if(n=window.getSelection(),n.getRangeAt&&n.rangeCount){for(e=[],r=n.rangeCount,t=0;r>t;t+=1)e.push(n.getRangeAt(t));return e}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},getLinkFromSelection:function(){var e,t,n,r,i;return e=null,document.selection?e=document.selection.createRange().parentElement():(t=window.getSelection(),t.rangeCount>0&&(e=t.getRangeAt(0).startContainer.parentNode)),null!==e&&"A"==e.tagName?e:window.getSelection&&(t=window.getSelection(),t.rangeCount>0)?(n=t.getRangeAt(0),r=document.createElement("DIV"),r.appendChild(n.cloneContents()),i=r.getElementsByTagName("A"),i.length>0?i[0]:null):null},restoreSelection:function(e){var t,n,r;if(e)if(window.getSelection)for(r=window.getSelection(),r.removeAllRanges(),n=e.length,t=0;n>t;t+=1)r.addRange(e[t]);else document.selection&&e.select&&e.select()},createTextStyle:function(e){var t,n,r,i,a,s,o;return t="",n=e.getAttribute("text-color")||"",r=e.getAttribute("text-size")||"",i=e.getAttribute("text-shadow-color")||"",a=e.getAttribute("text-shadow-horizontal")||"",s=e.getAttribute("text-shadow-horizontal")||"",o=e.getAttribute("text-shadow-blur")||"",""!==n&&(t+="color:"+n+";"),""!==r&&(t+="font-size:"+r+";"),""!==i&&(t+="text-shadow: "+a+" "+s+" "+o+" "+i+";"),t},getQueryStringByName:function(e){var t,n,r;return e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),r=n.exec(window.location.href),null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},retrieveUpdateArray:function(){var e,t,n,r,i,a;for(r=document.querySelectorAll("[hashedit]"),n=[],e=0;e<r.length;e+=1){for(a=r[e].querySelectorAll(".hashedit-edit"),t=0;t<a.length;t++)a[t].parentNode.removeChild(a[t]);for(a=r[e].querySelectorAll(".hashedit-move"),t=0;t<a.length;t++)a[t].parentNode.removeChild(a[t]);for(a=r[e].querySelectorAll(".hashedit-properties"),t=0;t<a.length;t++)a[t].parentNode.removeChild(a[t]);for(a=r[e].querySelectorAll(".hashedit-remove"),t=0;t<a.length;t++)a[t].parentNode.removeChild(a[t]);for(a=r[e].querySelectorAll(".hashedit-block-menu"),t=0;t<a.length;t++)a[t].parentNode.removeChild(a[t]);for(a=r[e].querySelectorAll(".hashedit-element-menu"),t=0;t<a.length;t++)a[t].parentNode.removeChild(a[t]);for(a=r[e].querySelectorAll("[hashedit-block]"),t=0;t<a.length;t++)a[t].removeAttribute("hashedit-block");for(a=r[e].querySelectorAll("[hashedit-element]"),t=0;t<a.length;t++)a[t].removeAttribute("hashedit-element");for(a=r[e].querySelectorAll("[hashedit-sortable]"),t=0;t<a.length;t++)a[t].removeAttribute("hashedit-sortable");for(a=r[e].querySelectorAll("[hashedit-empty]"),t=0;t<a.length;t++)a[t].removeAttribute("hashedit-empty");for(a=r[e].querySelectorAll("[contenteditable]"),t=0;t<a.length;t++)a[t].removeAttribute("contenteditable");for(a=r[e].querySelectorAll("[current-hashedit-element]"),t=0;t<a.length;t++)a[t].removeAttribute("current-hashedit-element");i={selector:r[e].getAttribute("hashedit-selector"),html:r[e].innerHTML},hashedit.debug===!0&&(console.log("update array"),console.log(i)),n.push(i)}return{url:hashedit.url,changes:n}},setup:function(e){var t,n,r,i,a,s,o,l,u;t=document.querySelector("body"),o="/login",n="/node_modules/hashedit/",r=["/node_modules/hashedit/dist/hashedit-min.css"],i=[".sortable"],a=!1,s=null,l=[],null!=t&&(e.dev&&(n="/dev/hashedit/",r=["/dev/hashedit/css/hashedit.css"]),e.path&&(n=e.path),e.stylesheet&&(r=e.stylesheet),1==t.hasAttribute("hashedit-demo")&&(a=!0),e.framework&&(hashedit.framework=e.framework),e.sortable&&""!=e.sortable&&(i=e.sortable.split(",")),e.blocks&&""!=e.blocks&&(l=e.blocks.split(",")),e.grid&&""!=e.grid&&(u=e.grid),e.editable&&""!=e.editable&&(editable=e.editable.split(",")),e.url&&(s=e.url),e.previewUrl?hashedit.previewUrl=e.previewUrl:hashedit.previewUrl=s,e.title&&(hashedit.title=e.title),e.login&&(o=e.login),e.auth&&"token"===e.auth&&(hashedit.useToken=!0,hashedit.authHeader="Authorization",hashedit.authHeaderPrefix="Bearer",hashedit.tokenName="id_token",e.authHeader&&(hashedit.authHeader=e.authHeader),e.authHeaderPrefix&&(hashedit.authHeaderPrefix=e.authHeaderPrefix),e.tokenName&&(hashedit.tokenName=e.tokenName)),e.translate&&(hashedit.canTranslate=!0,hashedit.language="en",hashedit.languagePath="/i18n/{{language}}.json",e.languagePath&&(hashedit.languagePath=e.languagePath),null!=localStorage.user_language&&(hashedit.language=localStorage.user_language)),e.saveUrl&&(hashedit.saveUrl=e.saveUrl));var d={path:n,login:o,stylesheet:r,sortable:i,blocks:l,grid:u,demo:a};null!=s&&(d.url=s),hashedit.setupEditor(d)},setupEditor:function(e){var t,n;for(hashedit.config=e,null!=e.path&&(hashedit.path=e.path),null!=e.login&&(hashedit.loginUrl=e.login),null!=e.grid&&(hashedit.grid=e.grid),hashedit.current.container=document.createElement("div"),hashedit.current.container.setAttribute("class","hashedit-container"),hashedit.current.container.setAttribute("id","hashedit-container"),null!==e.stylesheet&&(hashedit.stylesheet=e.stylesheet),null!==e.url&&(hashedit.url=e.url),document.body.appendChild(hashedit.current.container),n=document.createElement("style"),t=0;t<hashedit.stylesheet.length;t++)n.innerHTML+="@import url("+hashedit.stylesheet[t]+");";if(hashedit.current.container.appendChild(n),e.demo===!0)hashedit.demo=!0,hashedit.setActive(),hashedit.setupView(),hashedit.setupSortable(),hashedit.setupBlocks(),hashedit.setContentEditable(),hashedit.setupContentEditableEvents(),hashedit.setupMenu(e.path),hashedit.setupToast(),hashedit.createMenu(e.path),hashedit.loadHTML(e.path),hashedit.translate();else{var r={credentials:"include"};hashedit.useToken&&(r={headers:{}},r.headers[hashedit.authHeader]=hashedit.authHeaderPrefix+" "+localStorage.getItem(hashedit.tokenName)),fetch(hashedit.authUrl,r).then(function(t){if(200!==t.status)hashedit.showAuth();else{hashedit.setActive(),hashedit.setupView(),hashedit.setupSortable(),hashedit.setupBlocks(),hashedit.setContentEditable(),hashedit.setupContentEditableEvents(),hashedit.setupMenu(e.path),hashedit.setupToast(),hashedit.createMenu(e.path),hashedit.loadHTML(e.path),hashedit.translate();var n=new Event("hashedit.loaded");document.dispatchEvent(n)}})}},wrap:function(e,t){var n,r,i,a,s;for(t.length||(t=[t]),n=t.length-1;n>=0;n--)r=n>0?e.cloneNode(!0):e,i=t[n],a=i.parentNode,s=i.nextSibling,r.appendChild(i),s?a.insertBefore(r,s):a.appendChild(r)},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},showAuth:function(){window.location=hashedit.loginUrl},setupToast:function(){var e;e=document.createElement("div"),e.setAttribute("class","hashedit-toast"),e.innerHTML="Sample Toast",hashedit.current?hashedit.current.container.appendChild(e):document.body.appendChild(e)},replaceAll:function(e,t,n){var r,i;for(r=e,i=r.indexOf(t);-1!=i;)r=r.replace(t,n),i=r.indexOf(t);return r},showToast:function(e,t){var n;n=document.querySelector(".hashedit-toast"),n.innerHTML=e,n.removeAttribute("success"),n.removeAttribute("failure"),n.setAttribute("active",""),"success"==t?n.setAttribute("success",""):"failure"==t&&n.setAttribute("failure",""),setTimeout(function(){n.removeAttribute("active")},2e3)},findParentBySelector:function(e,t){var n,r;for(n=document.querySelectorAll(t),r=e.parentNode;r&&!hashedit.collectionHas(n,r);)r=r.parentNode;return r},collectionHas:function(e,t){var n,r;for(r=e.length,n=0;r>n;n+=1)if(e[n]==t)return!0;return!1},translate:function(e){var t,n,r,i;for(t=document.querySelectorAll("[data-i18n]"),n=0;n<t.length;n++)r=t[n].getAttribute("data-i18n"),""==r&&(r=t[n].innerText()),i=hashedit.i18n(r),t[n].innerHTML=i},i18n:function(e){var t,n,r;return n=hashedit.language,hashedit.canTranslate===!0&&void 0!==i18n&&hashedit.isI18nInit===!1&&(r=hashedit.languagePath,r=hashedit.replaceAll(r,"{{language}}",hashedit.language),t={lng:hashedit.language,getAsync:!1,useCookie:!1,useLocalStorage:!1,fallbackLng:"en",resGetPath:r,defaultLoadingValue:""},i18n.init(t),hashedit.isI18nInit=!0),i18n.t(e)}}}();